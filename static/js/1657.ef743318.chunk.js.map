{"version":3,"file":"static/js/1657.ef743318.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/graphics/sources/geojson/GeoJSONSourceWorker.js","../node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js","../node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import{createTask as t}from\"../../../../core/asyncUtils.js\";import s from\"../../../../core/Error.js\";import i from\"../../../../core/Logger.js\";import{isAbortError as r}from\"../../../../core/promiseUtils.js\";import{getJsonType as n}from\"../../../../geometry/support/jsonUtils.js\";import{WGS84 as a,equals as o}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as l,convertToGeometry as u,convertFromFeatures as d,convertToFeature as p,convertFromFeature as c}from\"../../featureConversionUtils.js\";import m from\"../../data/FeatureStore.js\";import{checkProjectionSupport as y,project as h}from\"../../data/projectionSupport.js\";import{QueryEngine as f}from\"../../data/QueryEngine.js\";import{inferLayerProperties as g,createOptimizedFeatures as _,validateGeoJSON as F}from\"./geojson.js\";import{createDrawingInfo as I,createDefaultTemplate as j,createDefaultAttributesFunction as E}from\"../support/clientSideDefaults.js\";import{loadGeometryEngineForSimplify as b,mixAttributes as T,createFeatureEditSuccessResult as w,createFeatureEditErrorResult as q,simplify as x}from\"../support/sourceUtils.js\";import S from\"../../../support/FieldsIndex.js\";import{kebabDict as R}from\"../../../support/fieldType.js\";import{getFieldDefaultValue as O,getFieldDefaultLength as k}from\"../../../support/fieldUtils.js\";import{utc as C}from\"../../../../time/timeZoneUtils.js\";const D={hasAttachments:!1,capabilities:\"query, editing, create, delete, update\",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};class Q{constructor(){this._queryEngine=null,this._snapshotFeatures=async e=>{const t=await this._fetch(e);return this._createFeatures(t)}}destroy(){this._queryEngine?.destroy(),this._queryEngine=this._createDefaultAttributes=null}async load(e,t={}){this._loadOptions={url:e.url,customParameters:e.customParameters};const i=[],[r]=await Promise.all([e.url?this._fetch(t?.signal):null,this._checkProjection(e.spatialReference)]),n=g(r,{geometryType:e.geometryType}),o=e.fields||n.fields||[],l=null!=e.hasZ?e.hasZ:n.hasZ,u=n.geometryType;let d=e.objectIdField||n.objectIdFieldName||\"__OBJECTID\";const p=e.spatialReference||a;let c=e.timeInfo;o===n.fields&&n.unknownFields.length>0&&i.push({name:\"geojson-layer:unknown-field-types\",message:\"Some fields types couldn't be inferred from the features and were dropped\",details:{unknownFields:n.unknownFields}});const y=new S(o);let h=y.get(d);h?(\"esriFieldTypeString\"!==h.type&&(h.type=\"esriFieldTypeOID\"),h.editable=!1,h.nullable=!1,d=h.name):(h={alias:d,name:d,type:\"string\"===n.objectIdFieldType?\"esriFieldTypeString\":\"esriFieldTypeOID\",editable:!1,nullable:!1},o.unshift(h));const _={};for(const a of o){if(null==a.name&&(a.name=a.alias),null==a.alias&&(a.alias=a.name),!a.name)throw new s(\"geojson-layer:invalid-field-name\",\"field name is missing\",{field:a});if(!R.jsonValues.includes(a.type))throw new s(\"geojson-layer:invalid-field-type\",`invalid type for field \"${a.name}\"`,{field:a});if(a.name!==h.name){const e=O(a);void 0!==e&&(_[a.name]=e)}null==a.length&&(a.length=k(a))}if(c){if(c.startTimeField){const e=y.get(c.startTimeField);e?(c.startTimeField=e.name,e.type=\"esriFieldTypeDate\"):c.startTimeField=null}if(c.endTimeField){const e=y.get(c.endTimeField);e?(c.endTimeField=e.name,e.type=\"esriFieldTypeDate\"):c.endTimeField=null}if(c.trackIdField){const e=y.get(c.trackIdField);e?c.trackIdField=e.name:(c.trackIdField=null,i.push({name:\"geojson-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:c}}))}c.startTimeField||c.endTimeField||(i.push({name:\"geojson-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing\",details:{timeInfo:c}}),c=null)}const F=u?I(u):void 0,b=y.dateFields.length?{timeZoneIANA:C}:null,T={warnings:i,featureErrors:[],layerDefinition:{...D,drawingInfo:F??void 0,templates:j(_),extent:void 0,geometryType:u,objectIdField:d,fields:o,hasZ:!!l,timeInfo:c,dateFieldsTimeReference:b}};this._queryEngine=new f({fieldsIndex:S.fromLayerJSON({fields:o,timeInfo:c,dateFieldsTimeReference:b}),geometryType:u,hasM:!1,hasZ:l,objectIdField:d,spatialReference:p,timeInfo:c,featureStore:new m({geometryType:u,hasM:!1,hasZ:l}),cacheSpatialQueries:!0});const w=this._queryEngine.fieldsIndex.requiredFields.indexOf(h);w>-1&&this._queryEngine.fieldsIndex.requiredFields.splice(w,1),this._createDefaultAttributes=E(_,d);const q=await this._createFeatures(r);this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,q);const x=this._normalizeFeatures(q,T.featureErrors);this._queryEngine.featureStore.addMany(x);const{fullExtent:Q,timeExtent:v}=await this._queryEngine.fetchRecomputedExtents();if(T.layerDefinition.extent=Q,v){const{start:e,end:t}=v;T.layerDefinition.timeInfo.timeExtent=[e,t]}return T}async applyEdits(e){const{spatialReference:t,geometryType:s}=this._queryEngine;return await Promise.all([b(t,s),y(e.adds,t),y(e.updates,t)]),await this._waitSnapshotComplete(),this._applyEdits(e)}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(e){this._loadOptions.customParameters=e,this._snapshotTask?.abort(),this._snapshotTask=t(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,e);const t=this._normalizeFeatures(e);t&&this._queryEngine.featureStore.addMany(t)}),(e=>{this._queryEngine.featureStore.clear(),r(e)||i.getLogger(\"esri.layers.GeoJSONLayer\").error(new s(\"geojson-layer:refresh\",\"An error occurred during refresh\",{error:e}))})),await this._waitSnapshotComplete();const{fullExtent:n,timeExtent:a}=await this._queryEngine.fetchRecomputedExtents();return{extent:n,timeExtent:a}}async _createFeatures(e){if(null==e)return[];const{geometryType:t,hasZ:s,objectIdField:i}=this._queryEngine,r=_(e,{geometryType:t,hasZ:s,objectIdField:i});if(!o(this._queryEngine.spatialReference,a))for(const n of r)null!=n.geometry&&(n.geometry=l(h(u(n.geometry,this._queryEngine.geometryType,this._queryEngine.hasZ,!1),a,this._queryEngine.spatialReference)));return r}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _fetch(t){const{url:s,customParameters:i}=this._loadOptions,r=(await e(s,{responseType:\"json\",query:{...i},signal:t})).data;return F(r),r}_normalizeFeatures(e,t){const{objectIdField:s,fieldsIndex:i}=this._queryEngine,r=[];for(const n of e){const e=this._createDefaultAttributes(),a=T(i,e,n.attributes,!0);a?t?.push(a):(this._assignObjectId(e,n.attributes,!0),n.attributes=e,n.objectId=e[s],r.push(n))}return r}async _applyEdits(e){const{adds:t,updates:s,deletes:i}=e,r={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t?.length&&this._applyAddEdits(r,t),s?.length&&this._applyUpdateEdits(r,s),i?.length){for(const e of i)r.deleteResults.push(w(e));this._queryEngine.featureStore.removeManyById(i)}const{fullExtent:n,timeExtent:a}=await this._queryEngine.fetchRecomputedExtents();return{extent:n,timeExtent:a,featureEditResults:r}}_applyAddEdits(e,t){const{addResults:s}=e,{geometryType:i,hasM:r,hasZ:a,objectIdField:o,spatialReference:l,featureStore:u,fieldsIndex:p}=this._queryEngine,c=[];for(const d of t){if(d.geometry&&i!==n(d.geometry)){s.push(q(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),r=T(p,t,d.attributes);if(r)s.push(r);else{if(this._assignObjectId(t,d.attributes),d.attributes=t,null!=d.uid){const t=d.attributes[o];e.uidToObjectId[d.uid]=t}if(null!=d.geometry){const e=d.geometry.spatialReference??l;d.geometry=h(x(d.geometry,e),e,l)}c.push(d),s.push(w(d.attributes[o]))}}u.addMany(d([],c,i,a,r,o))}_applyUpdateEdits({updateResults:e},t){const{geometryType:s,hasM:i,hasZ:r,objectIdField:a,spatialReference:o,featureStore:l,fieldsIndex:u}=this._queryEngine;for(const d of t){const{attributes:t,geometry:m}=d,y=t?.[a];if(null==y){e.push(q(`Identifier field ${a} missing`));continue}if(!l.has(y)){e.push(q(`Feature with object id ${y} missing`));continue}const f=p(l.getFeature(y),s,r,i);if(null!=m){if(s!==n(m)){e.push(q(\"Incorrect geometry type.\"));continue}const t=m.spatialReference??o;f.geometry=h(x(m,t),t,o)}if(t){const s=T(u,f.attributes,t);if(s){e.push(s);continue}}l.add(c(f,s,r,i,a)),e.push(w(y))}}_createObjectIdGenerator(e,t){const s=e.fieldsIndex.get(e.objectIdField);if(\"esriFieldTypeString\"===s.type)return()=>s.name+\"-\"+Date.now().toString(16);let i=Number.NEGATIVE_INFINITY;for(const r of t)r.objectId&&(i=Math.max(i,r.objectId));return i=Math.max(0,i)+1,()=>i++}_assignObjectId(e,t,s=!1){const i=this._queryEngine.objectIdField;e[i]=s&&i in t?t[i]:this._objectIdGenerator()}async _checkProjection(e){try{await y(a,e)}catch{throw new s(\"geojson-layer\",\"Projection not supported\")}}}export{Q as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{isISO8601Date as e}from\"../../../../core/date.js\";import t from\"../../../../core/Error.js\";import{isWGS84 as n}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{OptimizedFeature as o}from\"../../OptimizedFeature.js\";import r from\"../../OptimizedGeometry.js\";import{normalizeFieldName as i,isNumericField as s}from\"../../../support/fieldUtils.js\";const c={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function u(e){return c[e]}function*l(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*f(e){if(e)switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*p(e,t={}){const{geometryType:n,objectIdField:i}=t;for(const s of e){const{geometry:e,properties:c,id:l}=s;if(e&&u(e.type)!==n)continue;const f=c||{};let p;i&&(p=f[i],null==l||p||(f[i]=p=l));const a=new o(e?h(new r,e,t):null,f,null,p??void 0);yield a}}function a(e){for(const t of e)if(t.length>2)return!0;return!1}function y(e){return!g(e)}function d(e){return g(e)}function g(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function m(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function h(e,t,n){switch(t.type){case\"LineString\":return w(e,t,n);case\"MultiLineString\":return P(e,t,n);case\"MultiPoint\":return j(e,t,n);case\"MultiPolygon\":return b(e,t,n);case\"Point\":return S(e,t,n);case\"Polygon\":return F(e,t,n)}}function w(e,t,n){return M(e,t.coordinates,n),e}function P(e,t,n){for(const o of t.coordinates)M(e,o,n);return e}function j(e,t,n){return M(e,t.coordinates,n),e}function b(e,t,n){for(const o of t.coordinates){G(e,o[0],n);for(let t=1;t<o.length;t++)k(e,o[t],n)}return e}function S(e,t,n){return O(e,t.coordinates,n),e}function F(e,t,n){const o=t.coordinates;G(e,o[0],n);for(let r=1;r<o.length;r++)k(e,o[r],n);return e}function G(e,t,n){const o=m(t);y(o)?T(e,o,n):M(e,o,n)}function k(e,t,n){const o=m(t);d(o)?T(e,o,n):M(e,o,n)}function M(e,t,n){for(const o of t)O(e,o,n);e.lengths.push(t.length)}function T(e,t,n){for(let o=t.length-1;o>=0;o--)O(e,t[o],n);e.lengths.push(t.length)}function O(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function L(t){switch(typeof t){case\"string\":return e(t)?\"esriFieldTypeDate\":\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function E(e,o=4326){if(!e)throw new t(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==e.type&&\"FeatureCollection\"!==e.type)throw new t(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:e});const{crs:r}=e;if(!r)return;const i=\"string\"==typeof r?r:\"name\"===r.type?r.properties.name:\"EPSG\"===r.type?r.properties.code:null,s=n({wkid:o})?new RegExp(\".*(CRS84H?|4326)$\",\"i\"):new RegExp(`.*(${o})$`,\"i\");if(!i||!s.test(i))throw new t(\"geojson:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:r})}function I(e,t={}){const n=[],o=new Set,r=new Set;let c,p=!1,y=null,d=!1,{geometryType:g=null}=t,m=!1;for(const s of l(e)){const{geometry:e,properties:t,id:l}=s;if(!e||(g||(g=u(e.type)),u(e.type)===g)){if(!p){p=a(f(e))}if(d||(d=null!=l,d&&(c=typeof l,t&&(y=Object.keys(t).filter((e=>t[e]===l))))),t&&y&&d&&null!=l&&(y.length>1?y=y.filter((e=>t[e]===l)):1===y.length&&(y=t[y[0]]===l?y:[])),!m&&t){let e=!0;for(const s in t){if(o.has(s))continue;const c=t[s];if(null==c){e=!1,r.add(s);continue}const u=L(c);if(\"unknown\"===u){r.add(s);continue}r.delete(s),o.add(s);const l=i(s);l&&n.push({name:l,alias:s,type:u})}m=e}}}const h=i(1===y?.length&&y[0]||null)??void 0;if(h)for(const i of n)if(i.name===h&&s(i)){i.type=\"esriFieldTypeOID\";break}return{fields:n,geometryType:g,hasZ:p,objectIdFieldName:h,objectIdFieldType:c,unknownFields:Array.from(r)}}function N(e,t){return Array.from(p(l(e),t))}export{N as createOptimizedFeatures,u as getGeometryType,I as inferLayerProperties,E as validateGeoJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{clone as t}from\"../../../../core/lang.js\";import{queryCapabilities as s}from\"../../data/QueryEngineCapabilities.js\";import{defaultPointSymbolJSON as e,defaultPolylineSymbolJSON as r,defaultPolygonSymbolJSON as p}from\"../../../../symbols/support/defaultsJSON.js\";function o(t){return{renderer:{type:\"simple\",symbol:\"esriGeometryPoint\"===t||\"esriGeometryMultipoint\"===t?e:\"esriGeometryPolyline\"===t?r:p}}}const u=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let n=1;function i(t,s){if(has(\"esri-csp-restrictions\"))return()=>({[s]:null,...t});try{let e=`this.${s} = null;`;for(const s in t){e+=`this${u.test(s)?`.${s}`:`[\"${s}\"]`} = ${JSON.stringify(t[s])};`}const r=new Function(`\\n      return class AttributesClass$${n++} {\\n        constructor() {\\n          ${e};\\n        }\\n      }\\n    `)();return()=>new r}catch(e){return()=>({[s]:null,...t})}}function a(s={}){return[{name:\"New Feature\",description:\"\",prototype:{attributes:t(s)}}]}function l(t,e){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:e,supportsDelete:e,supportsEditing:e,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:e,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:s,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:e,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}export{l as createCapabilities,i as createDefaultAttributesFunction,a as createDefaultTemplate,o as createDrawingInfo};\n"],"names":["D","hasAttachments","capabilities","useStandardizedQueries","supportsCoordinatesQuantization","supportsReturningQueryGeometry","advancedQueryCapabilities","supportsQueryAttachments","supportsStatistics","supportsPercentileStatistics","supportsReturningGeometryCentroid","supportsQueryWithDistance","supportsDistinct","supportsReturningQueryExtent","supportsReturningGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQueryWithResultType","supportsSqlExpression","supportsDisjointSpatialRel","Q","constructor","this","_queryEngine","_snapshotFeatures","async","t","_fetch","e","_createFeatures","destroy","_this$_queryEngine","_createDefaultAttributes","load","arguments","length","undefined","_loadOptions","url","customParameters","i","r","Promise","all","signal","_checkProjection","spatialReference","n","g","geometryType","o","fields","l","hasZ","u","d","objectIdField","objectIdFieldName","p","a","c","timeInfo","unknownFields","push","name","message","details","y","S","h","get","type","editable","nullable","alias","objectIdFieldType","unshift","_","s","field","R","jsonValues","includes","concat","O","k","startTimeField","endTimeField","trackIdField","F","I","b","dateFields","timeZoneIANA","C","T","warnings","featureErrors","layerDefinition","drawingInfo","templates","j","extent","dateFieldsTimeReference","f","fieldsIndex","fromLayerJSON","hasM","featureStore","m","cacheSpatialQueries","w","requiredFields","indexOf","splice","E","q","_objectIdGenerator","_createObjectIdGenerator","x","_normalizeFeatures","addMany","fullExtent","timeExtent","v","fetchRecomputedExtents","start","end","applyEdits","adds","updates","_waitSnapshotComplete","_applyEdits","queryFeatures","executeQuery","queryFeatureCount","executeQueryForCount","queryObjectIds","executeQueryForIds","queryExtent","executeQueryForExtent","querySnapping","executeQueryForSnapping","refresh","_this$_snapshotTask","_snapshotTask","abort","promise","then","clear","getLogger","error","geometry","finished","responseType","query","data","attributes","_assignObjectId","objectId","deletes","addResults","deleteResults","updateResults","uidToObjectId","_applyAddEdits","_applyUpdateEdits","removeManyById","featureEditResults","uid","_d$geometry$spatialRe","_ref","has","getFeature","_m$spatialReference","add","Date","now","toString","Number","NEGATIVE_INFINITY","Math","max","LineString","MultiLineString","MultiPoint","Point","Polygon","MultiPolygon","features","coordinates","M","P","G","lengths","coords","L","crs","properties","code","wkid","RegExp","test","_i","_y","Set","id","Object","keys","filter","delete","Array","from","N","_p","renderer","symbol","JSON","stringify","Function","description","prototype","analytics","supportsCacheHint","attachment","isVersioned","supportsAttachment","supportsM","supportsZ","metadata","supportsAdvancedFieldProperties","operations","supportsCalculate","supportsTruncate","supportsValidateSql","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsQueryAnalytics","supportsQueryTopFeatures","supportsResizeAttachments","supportsSync","supportsUpdate","supportsExceedsLimitStatistics","supportsAsyncConvert3D","queryRelated","supportsCount","queryTopFeatures","editing","supportsGeometryUpdate","supportsGlobalId","supportsReturnServiceEditsInSourceSpatialReference","supportsRollbackOnFailure","supportsUpdateWithoutM","supportsUploadWithItemId","supportsDeleteByAnonymous","supportsDeleteByOthers","supportsUpdateByAnonymous","supportsUpdateByOthers","supportsAsyncApplyEdits","zDefault"],"sourceRoot":""}