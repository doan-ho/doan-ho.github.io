"use strict";(self.webpackChunkarcgis_web=self.webpackChunkarcgis_web||[]).push([[8336,2463,2170],{48976:(e,t,n)=>{n.d(t,{a:()=>g,c:()=>m,g:()=>u,i:()=>p,j:()=>C,k:()=>f,m:()=>c,r:()=>V,s:()=>h});var i=n(11873),r=n(98131),s=n(71353),o=n(26277),a=n(11186),l=n(90045);function h(e,t,n){n*=.5;const i=Math.sin(n);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(n),e}function u(e,t){const n=2*Math.acos(t[3]),i=Math.sin(n/2);return i>(0,o.g)()?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0),n}function c(e,t,n){const i=t[0],r=t[1],s=t[2],o=t[3],a=n[0],l=n[1],h=n[2],u=n[3];return e[0]=i*u+o*a+r*h-s*l,e[1]=r*u+o*l+s*a-i*h,e[2]=s*u+o*h+i*l-r*a,e[3]=o*u-i*a-r*l-s*h,e}function d(e,t,n,i){const r=t[0],s=t[1],a=t[2],l=t[3];let h,u,c,d,p,g=n[0],_=n[1],f=n[2],m=n[3];return u=r*g+s*_+a*f+l*m,u<0&&(u=-u,g=-g,_=-_,f=-f,m=-m),1-u>(0,o.g)()?(h=Math.acos(u),c=Math.sin(h),d=Math.sin((1-i)*h)/c,p=Math.sin(i*h)/c):(d=1-i,p=i),e[0]=d*r+p*g,e[1]=d*s+p*_,e[2]=d*a+p*f,e[3]=d*l+p*m,e}function p(e,t){const n=t[0],i=t[1],r=t[2],s=t[3],o=n*n+i*i+r*r+s*s,a=o?1/o:0;return e[0]=-n*a,e[1]=-i*a,e[2]=-r*a,e[3]=s*a,e}function g(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function _(e,t){const n=t[0]+t[4]+t[8];let i;if(n>0)i=Math.sqrt(n+1),e[3]=.5*i,i=.5/i,e[0]=(t[5]-t[7])*i,e[1]=(t[6]-t[2])*i,e[2]=(t[1]-t[3])*i;else{let n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);const r=(n+1)%3,s=(n+2)%3;i=Math.sqrt(t[3*n+n]-t[3*r+r]-t[3*s+s]+1),e[n]=.5*i,i=.5/i,e[3]=(t[3*r+s]-t[3*s+r])*i,e[r]=(t[3*r+n]+t[3*n+r])*i,e[s]=(t[3*s+n]+t[3*n+s])*i}return e}function f(e,t,n,i){const r=.5*Math.PI/180;t*=r,n*=r,i*=r;const s=Math.sin(t),o=Math.cos(t),a=Math.sin(n),l=Math.cos(n),h=Math.sin(i),u=Math.cos(i);return e[0]=s*l*u-o*a*h,e[1]=o*a*u+s*l*h,e[2]=o*l*h-s*a*u,e[3]=o*l*u+s*a*h,e}const m=l.c,v=l.s,y=l.a,E=c,b=l.b,x=l.d,T=l.l,M=l.f,w=M,A=l.g,R=A,S=l.n,C=l.h,I=l.e;function V(e,t,n){const i=(0,a.j)(t,n);return i<-.999999?((0,a.b)(L,P,t),(0,a.k)(L)<1e-6&&(0,a.b)(L,N,t),(0,a.n)(L,L),h(e,L,Math.PI),e):i>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):((0,a.b)(L,t,n),e[0]=L[0],e[1]=L[1],e[2]=L[2],e[3]=1+i,S(e,e))}const L=(0,s.c)(),P=(0,s.f)(1,0,0),N=(0,s.f)(0,1,0);const k=(0,r.a)(),O=(0,r.a)();const D=(0,i.a)();Object.freeze(Object.defineProperty({__proto__:null,add:y,calculateW:function(e,t){const n=t[0],i=t[1],r=t[2];return e[0]=n,e[1]=i,e[2]=r,e[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r)),e},conjugate:g,copy:m,dot:x,equals:I,exactEquals:C,fromEuler:f,fromMat3:_,getAxisAngle:u,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},invert:p,len:w,length:M,lerp:T,mul:E,multiply:c,normalize:S,random:function(e){const t=o.R,n=t(),i=t(),r=t(),s=Math.sqrt(1-n),a=Math.sqrt(n);return e[0]=s*Math.sin(2*Math.PI*i),e[1]=s*Math.cos(2*Math.PI*i),e[2]=a*Math.sin(2*Math.PI*r),e[3]=a*Math.cos(2*Math.PI*r),e},rotateX:function(e,t,n){n*=.5;const i=t[0],r=t[1],s=t[2],o=t[3],a=Math.sin(n),l=Math.cos(n);return e[0]=i*l+o*a,e[1]=r*l+s*a,e[2]=s*l-r*a,e[3]=o*l-i*a,e},rotateY:function(e,t,n){n*=.5;const i=t[0],r=t[1],s=t[2],o=t[3],a=Math.sin(n),l=Math.cos(n);return e[0]=i*l-s*a,e[1]=r*l+o*a,e[2]=s*l+i*a,e[3]=o*l-r*a,e},rotateZ:function(e,t,n){n*=.5;const i=t[0],r=t[1],s=t[2],o=t[3],a=Math.sin(n),l=Math.cos(n);return e[0]=i*l+r*a,e[1]=r*l-i*a,e[2]=s*l+o*a,e[3]=o*l-s*a,e},rotationTo:V,scale:b,set:v,setAxes:function(e,t,n,i){const r=D;return r[0]=n[0],r[3]=n[1],r[6]=n[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-t[0],r[5]=-t[1],r[8]=-t[2],S(e,_(e,r))},setAxisAngle:h,slerp:d,sqlerp:function(e,t,n,i,r,s){return d(k,t,r,s),d(O,n,i,s),d(e,k,O,2*s*(1-s)),e},sqrLen:R,squaredLength:A,str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}},Symbol.toStringTag,{value:"Module"}))},86950:(e,t,n)=>{n.d(t,{Ch:()=>I,EX:()=>T,G:()=>A,Ht:()=>S,K6:()=>M,WC:()=>R,Y3:()=>E,_Y:()=>y,gp:()=>C,mj:()=>w,sJ:()=>b,xr:()=>v});var i=n(51995),r=n(90045),s=n(67077);function o(e){return"h"in e&&"s"in e&&"v"in e}function a(e){return"l"in e&&"a"in e&&"b"in e}function l(e){return"l"in e&&"c"in e&&"h"in e}const h=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],u=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function c(e,t){const n=[];let i,r;if(e[0].length!==t.length)throw new Error("dimensions do not match");const s=e.length,o=e[0].length;let a=0;for(i=0;i<s;i++){for(a=0,r=0;r<o;r++)a+=e[i][r]*t[r];n.push(a)}return n}function d(e){const t=[e.r/255,e.g/255,e.b/255].map((e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4)),n=c(h,t);return{x:100*n[0],y:100*n[1],z:100*n[2]}}function p(e){const t=c(u,[e.x/100,e.y/100,e.z/100]).map((e=>{const t=e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function g(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map((e=>e>(6/29)**3?e**(1/3):1/3*(29/6)**2*e+4/29));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function _(e){const t=e.l,n=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((e=>e>6/29?e**3:3*(6/29)**2*(e-4/29)));return{x:95.047*n[0],y:100*n[1],z:108.883*n[2]}}function f(e){return function(e){const t=e.l,n=e.a,i=e.b,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s=s>0?s:s+2*Math.PI,{l:t,c:r,h:s}}(g(d(e)))}function m(e){return p(_(function(e){const t=e.l,n=e.c,i=e.h;return{l:t,a:n*Math.cos(i),b:n*Math.sin(i)}}(e)))}function v(e){return function(e){return"r"in e&&"g"in e&&"b"in e}(e)?e:l(e)?m(e):a(e)?function(e){return p(_(e))}(e):function(e){return"x"in e&&"y"in e&&"z"in e}(e)?p(e):o(e)?function(e){const t=(e.h+360)%360/60,n=e.s/100,i=e.v/100*255,r=i*n,s=r*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:r,g:s,b:0};break;case 1:o={r:s,g:r,b:0};break;case 2:o={r:0,g:r,b:s};break;case 3:o={r:0,g:s,b:r};break;case 4:o={r:s,g:0,b:r};break;case 5:case 6:o={r:r,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+i-r),o.g=Math.round(o.g+i-r),o.b=Math.round(o.b+i-r),o}(e):e}function y(e){return o(e)?e:function(e){const t=e.r,n=e.g,i=e.b,r=Math.max(t,n,i),s=r-Math.min(t,n,i);let o=r,a=0===s?0:r===t?(n-i)/s%6:r===n?(i-t)/s+2:(t-n)/s+4,l=0===s?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}(v(e))}function E(e){return a(e)?e:function(e){return g(d(e))}(v(e))}function b(e){return l(e)?e:f(v(e))}function x(e){let{r:t,g:n,b:r,a:s}=e;return s<1&&(t=Math.round(s*t+255*(1-s)),n=Math.round(s*n+255*(1-s)),r=Math.round(s*r+255*(1-s))),new i.Z({r:t,g:n,b:r})}function T(e,t){const{r:n,g:i,b:r}=null!==t&&void 0!==t&&t.ignoreAlpha?e:x(e);return.2126*n+.7152*i+.0722*r}var M;function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.High;return T(e,{ignoreAlpha:!0})>t?new i.Z([0,0,0,e.a]):new i.Z([255,255,255,e.a])}function A(e,t){const n=e.clone();return n.a*=t,n}function R(e,t){return e===t||null!=e&&e.equals(t)}function S(e,t){return e===t||null!=e&&null!=t&&(0,r.e)(e,t)}function C(e){return(0,s.f)(e[0],e[1],e[2],e.length>3?e[3]:1)}function I(e,t){const n=i.Z.toUnitRGBA(e);return n[3]*=t,n}!function(e){e[e.Low=160]="Low",e[e.High=225]="High"}(M||(M={}))},92463:(e,t,n)=>{n.r(t),n.d(t,{hydratedAdapter:()=>l});var i=n(53866),r=n(77577),s=n(585),o=n(80885),a=n(29909);const l={convertToGEGeometry:function(e,t){if(null==t)return null;let n="cache"in t?t.cache._geVersion:void 0;return null==n&&(n=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=n)),n},exportPoint:function(e,t,n){const i=e.hasZ(t),r=e.hasM(t),o=new s.Z({x:e.getPointX(t),y:e.getPointY(t),spatialReference:n});return i&&(o.z=e.getPointZ(t)),r&&(o.m=e.getPointM(t)),o.cache._geVersion=t,o},exportPolygon:function(e,t,n){const i=new o.Z({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return i.cache._geVersion=t,i},exportPolyline:function(e,t,n){const i=new a.Z({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return i.cache._geVersion=t,i},exportMultipoint:function(e,t,n){const i=new r.Z({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:n});return i.cache._geVersion=t,i},exportExtent:function(e,t,n){const r=e.hasZ(t),s=e.hasM(t),o=new i.Z({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:n});if(r){const n=e.getZExtent(t);o.zmin=n.vmin,o.zmax=n.vmax}if(s){const n=e.getMExtent(t);o.mmin=n.vmin,o.mmax=n.vmax}return o.cache._geVersion=t,o}}},2170:(e,t,n)=>{n.r(t),n.d(t,{buffer:()=>R,changeDefaultSpatialReferenceTolerance:()=>Y,clearDefaultSpatialReferenceTolerance:()=>j,clip:()=>a,contains:()=>h,convexHull:()=>b,crosses:()=>u,cut:()=>l,densify:()=>D,difference:()=>x,disjoint:()=>f,distance:()=>c,equals:()=>d,extendedSpatialReferenceInfo:()=>o,flipHorizontal:()=>N,flipVertical:()=>k,generalize:()=>O,geodesicArea:()=>z,geodesicBuffer:()=>S,geodesicDensify:()=>Z,geodesicLength:()=>H,intersect:()=>M,intersectLinesToPoints:()=>F,intersects:()=>p,isSimple:()=>y,nearestCoordinate:()=>C,nearestVertex:()=>I,nearestVertices:()=>V,offset:()=>A,overlaps:()=>m,planarArea:()=>G,planarLength:()=>U,relate:()=>v,rotate:()=>P,simplify:()=>E,symmetricDifference:()=>T,touches:()=>g,union:()=>w,within:()=>_});var i=n(99058),r=n(92463);function s(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function o(e){return i.G.extendedSpatialReferenceInfo(e)}function a(e,t){return i.G.clip(r.hydratedAdapter,s(e),e,t)}function l(e,t){return i.G.cut(r.hydratedAdapter,s(e),e,t)}function h(e,t){return i.G.contains(r.hydratedAdapter,s(e),e,t)}function u(e,t){return i.G.crosses(r.hydratedAdapter,s(e),e,t)}function c(e,t,n){return i.G.distance(r.hydratedAdapter,s(e),e,t,n)}function d(e,t){return i.G.equals(r.hydratedAdapter,s(e),e,t)}function p(e,t){return i.G.intersects(r.hydratedAdapter,s(e),e,t)}function g(e,t){return i.G.touches(r.hydratedAdapter,s(e),e,t)}function _(e,t){return i.G.within(r.hydratedAdapter,s(e),e,t)}function f(e,t){return i.G.disjoint(r.hydratedAdapter,s(e),e,t)}function m(e,t){return i.G.overlaps(r.hydratedAdapter,s(e),e,t)}function v(e,t,n){return i.G.relate(r.hydratedAdapter,s(e),e,t,n)}function y(e){return i.G.isSimple(r.hydratedAdapter,s(e),e)}function E(e){return i.G.simplify(r.hydratedAdapter,s(e),e)}function b(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.G.convexHull(r.hydratedAdapter,s(e),e,t)}function x(e,t){return i.G.difference(r.hydratedAdapter,s(e),e,t)}function T(e,t){return i.G.symmetricDifference(r.hydratedAdapter,s(e),e,t)}function M(e,t){return i.G.intersect(r.hydratedAdapter,s(e),e,t)}function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i.G.union(r.hydratedAdapter,s(e),e,t)}function A(e,t,n,o,a,l){return i.G.offset(r.hydratedAdapter,s(e),e,t,n,o,a,l)}function R(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return i.G.buffer(r.hydratedAdapter,s(e),e,t,n,o)}function S(e,t,n,o,a,l){return i.G.geodesicBuffer(r.hydratedAdapter,s(e),e,t,n,o,a,l)}function C(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return i.G.nearestCoordinate(r.hydratedAdapter,s(e),e,t,n)}function I(e,t){return i.G.nearestVertex(r.hydratedAdapter,s(e),e,t)}function V(e,t,n,o){return i.G.nearestVertices(r.hydratedAdapter,s(e),e,t,n,o)}function L(e){var t,n;return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e&&null!==(t=null===(n=e.extent)||void 0===n?void 0:n.center)&&void 0!==t?t:null}function P(e,t,n){var r;if(null==e)throw new q;const s=e.spatialReference;if(null==(n=null!==(r=n)&&void 0!==r?r:L(e)))throw new q;const o=e.constructor.fromJSON(i.G.rotate(e,t,n));return o.spatialReference=s,o}function N(e,t){var n;if(null==e)throw new q;const r=e.spatialReference;if(null==(t=null!==(n=t)&&void 0!==n?n:L(e)))throw new q;const s=e.constructor.fromJSON(i.G.flipHorizontal(e,t));return s.spatialReference=r,s}function k(e,t){var n;if(null==e)throw new q;const r=e.spatialReference;if(null==(t=null!==(n=t)&&void 0!==n?n:L(e)))throw new q;const s=e.constructor.fromJSON(i.G.flipVertical(e,t));return s.spatialReference=r,s}function O(e,t,n,o){return i.G.generalize(r.hydratedAdapter,s(e),e,t,n,o)}function D(e,t,n){return i.G.densify(r.hydratedAdapter,s(e),e,t,n)}function Z(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return i.G.geodesicDensify(r.hydratedAdapter,s(e),e,t,n,o)}function G(e,t){return i.G.planarArea(r.hydratedAdapter,s(e),e,t)}function U(e,t){return i.G.planarLength(r.hydratedAdapter,s(e),e,t)}function z(e,t,n){return i.G.geodesicArea(r.hydratedAdapter,s(e),e,t,n)}function H(e,t,n){return i.G.geodesicLength(r.hydratedAdapter,s(e),e,t,n)}function F(e,t){return i.G.intersectLinesToPoints(r.hydratedAdapter,s(e),e,t)}function Y(e,t){i.G.changeDefaultSpatialReferenceTolerance(e,t)}function j(e){i.G.clearDefaultSpatialReferenceTolerance(e)}class q extends Error{constructor(){super("Illegal Argument Exception")}}},68859:(e,t,n)=>{n.d(t,{K:()=>s});var i=n(71353),r=n(50628);function s(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;o[0]=e.x,o[1]=e.y;const s=e.z;return o[2]=void 0!==s?s:i,(0,r.projectBuffer)(o,e.spatialReference,0,t,n,0,1)}const o=(0,i.c)()},15559:(e,t,n)=>{n.d(t,{Gb:()=>p,Jf:()=>_,j2:()=>f,p8:()=>g});n(59486);var i=n(10064),r=n(68860),s=n(38516),o=n(92975),a=n(29909),l=n(80885),h=(n(585),n(78952));function u(e){if(!e)return null;if((0,o.sT)(e)&&e.wkid){const t=s.Dg[e.wkid];if(t)return t}const t=e.wkt2||e.wkt;if(t){const e=function(e){const t=s.FQ.exec(e);if(!t||2!==t.length)return null;const n=t[1].split(",");if(!n||n.length<3)return null;const i=parseFloat(n[1]),r=parseFloat(n[2]);return isNaN(i)||isNaN(r)?null:{a:i,f:0===r?0:1/r}}(t);if(e)return e}return null}function c(e){const t=u(null!==e&&void 0!==e?e:h.Z.WGS84);if(function(e){return null!=e&&"b"in e&&"eSq"in e&&"radius"in e}(t))return t;const n=t.a*(1-t.f);return Object.assign(t,{b:n,eSq:1-(n/t.a)**2,radius:(2*t.a+n)/3,densificationRatio:1e4/((2*t.a+n)/3)})}function d(e,t,n){const{a:i,eSq:r}=c(n),o=Math.sqrt(r),a=Math.sin(t[1]*s.Yr),l=i*t[0]*s.Yr;let h;return h=r>0?i*((1-r)*(a/(1-r*(a*a))-1/(2*o)*Math.log((1-o*a)/(1+o*a))))*.5:i*a,e[0]=l,e[1]=h,e}function p(e){return null!==u(e)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"square-meters";if(e.some((e=>!p(e.spatialReference))))throw new i.Z("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const n=[];for(let i=0;i<e.length;i++){const t=e[i],r=t.spatialReference,{radius:s,densificationRatio:o}=c(r),a=s*o;n.push(f(t,a))}const s=[],o=[0,0],a=[0,0];for(let i=0;i<n.length;i++){const{rings:e,spatialReference:l}=n[i];let h=0;for(let t=0;t<e.length;t++){const n=e[t];d(o,n[0],l),d(a,n[n.length-1],l);let i=a[0]*o[1]-o[0]*a[1];for(let e=0;e<n.length-1;e++)d(o,n[e+1],l),d(a,n[e],l),i+=a[0]*o[1]-o[0]*a[1];h+=i}h=(0,r.En)(h,"square-meters",t),s.push(h/-2)}return s}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"meters";if(!e)throw new i.Z("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(e.some((e=>!p(e.spatialReference))))throw new i.Z("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const n=[];for(let i=0;i<e.length;i++){const s=e[i],{spatialReference:o}=s,a="polyline"===s.type?s.paths:s.rings;let l=0;for(let e=0;e<a.length;e++){const t=a[e];let n=0;for(let e=1;e<t.length;e++){const i=t[e-1][0],r=t[e][0],s=t[e-1][1],a=t[e][1];if(s!==a||i!==r){const e=new m;y(e,[i,s],[r,a],o),n+=e.distance}}l+=n}l=(0,r.En)(l,"meters",t),n.push(l)}return n}function f(e,t){if("polyline"!==e.type&&"polygon"!==e.type)throw new i.Z("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:n}=e;if(!p(n))throw new i.Z("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const r="polyline"===e.type?e.paths:e.rings,s=[],o=[0,0],h=new m;for(const i of r){const e=[];s.push(e),e.push([i[0][0],i[0][1]]);let r,a,l=i[0][0],u=i[0][1];for(let s=0;s<i.length-1;s++){if(r=i[s+1][0],a=i[s+1][1],l===r&&u===a)continue;const c=[l,u];y(h,[l,u],[r,a],n);const{azimuth:d,distance:p}=h,g=p/t;if(g>1){for(let i=1;i<=g-1;i++)v(o,c,d,i*t,n),e.push(o.slice(0));v(o,c,d,(p+Math.floor(g-1)*t)/2,n),e.push(o.slice(0))}v(o,c,d,p,n),e.push(o.slice(0)),l=o[0],u=o[1]}}return"polyline"===e.type?new a.Z({paths:s,spatialReference:n}):new l.Z({rings:s,spatialReference:n})}class m{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.distance=e,this.azimuth=t,this.reverseAzimuth=n}}function v(e,t,n,i,r){const o=t[0],a=t[1],l=o*s.Yr,h=a*s.Yr,u=(null!==n&&void 0!==n?n:0)*s.Yr,{a:d,b:p,f:g}=c(r),_=Math.sin(u),f=Math.cos(u),m=(1-g)*Math.tan(h),v=1/Math.sqrt(1+m*m),y=m*v,E=Math.atan2(m,f),b=v*_,x=b*b,T=1-x,M=T*(d*d-p*p)/(p*p),w=1+M/16384*(4096+M*(M*(320-175*M)-768)),A=M/1024*(256+M*(M*(74-47*M)-128));let R,S,C,I,V=i/(p*w),L=2*Math.PI;for(;Math.abs(V-L)>1e-12;)C=Math.cos(2*E+V),R=Math.sin(V),S=Math.cos(V),I=A*R*(C+A/4*(S*(2*C*C-1)-A/6*C*(4*R*R-3)*(4*C*C-3))),L=V,V=i/(p*w)+I;const P=y*R-v*S*f,N=Math.atan2(y*S+v*R*f,(1-g)*Math.sqrt(x+P*P)),k=Math.atan2(R*_,v*S-y*R*f),O=g/16*T*(4+g*(4-3*T)),D=N/s.Yr,Z=(l+(k-(1-O)*g*b*(V+O*R*(C+O*S*(2*C*C-1)))))/s.Yr;return e[0]=Z,e[1]=D,e}function y(e,t,n,i){const r=t[0]*s.Yr,o=t[1]*s.Yr,a=n[0]*s.Yr,l=n[1]*s.Yr,{a:h,b:u,f:d,radius:p}=c(i),g=a-r,_=Math.atan((1-d)*Math.tan(o)),f=Math.atan((1-d)*Math.tan(l)),m=Math.sin(_),v=Math.cos(_),y=Math.sin(f),E=Math.cos(f);let b,x,T,M,w,A,R,S,C,I,V=1e3,L=g;do{if(R=Math.sin(L),S=Math.cos(L),T=Math.sqrt(E*R*(E*R)+(v*y-m*E*S)*(v*y-m*E*S)),0===T)return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;w=m*y+v*E*S,A=Math.atan2(T,w),C=v*E*R/T,x=1-C*C,M=w-2*m*y/x,isNaN(M)&&(M=0),I=d/16*x*(4+d*(4-3*x)),b=L,L=g+(1-I)*d*C*(A+I*T*(M+I*w*(2*M*M-1)))}while(Math.abs(L-b)>1e-12&&--V>0);if(0===V){const t=p,n=Math.acos(Math.sin(o)*Math.sin(l)+Math.cos(o)*Math.cos(l)*Math.cos(a-r))*t,i=a-r,h=Math.sin(i)*Math.cos(l),u=Math.cos(o)*Math.sin(l)-Math.sin(o)*Math.cos(l)*Math.cos(i),c=Math.atan2(h,u);return e.azimuth=c/s.Yr,e.distance=n,e.reverseAzimuth=void 0,e}const P=x*(h*h-u*u)/(u*u),N=P/1024*(256+P*(P*(74-47*P)-128)),k=u*(1+P/16384*(4096+P*(P*(320-175*P)-768)))*(A-N*T*(M+N/4*(w*(2*M*M-1)-N/6*M*(4*T*T-3)*(4*M*M-3)))),O=Math.atan2(E*Math.sin(L),v*y-m*E*Math.cos(L)),D=Math.atan2(v*Math.sin(L),v*y*Math.cos(L)-m*E);return e.azimuth=O/s.Yr,e.distance=k,e.reverseAzimuth=D/s.Yr,e}},70178:(e,t,n)=>{n.d(t,{k:()=>r});n(93169);var i=n(92975);function r(e,t){return e===t||null!=e&&null!=t&&(0,i.fS)(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}},55946:(e,t,n)=>{function i(e,t,n,i){return{x:e,y:t,z:n,hasZ:null!=n,hasM:!1,spatialReference:i,type:"point"}}n.d(t,{T:()=>i})},37818:(e,t,n)=>{n.d(t,{D:()=>p,WG:()=>d,kB:()=>l});n(59486),n(52639),n(93169),n(84652);var i=n(18722),r=n(77981),s=n(55946),o=n(78952);function a(e){return"declaredClass"in e}function l(e){return null==e?null:function(e){return"declaredClass"in e}(e)?e:(0,r.im)(function(e){const{wkid:t,wkt:n,wkt2:i,latestWkid:r}=e.spatialReference,s={wkid:t,wkt:n,wkt2:i,latestWkid:r};switch(e.type){case"point":{const{x:t,y:n,z:i,m:r}=e;return{x:t,y:n,z:i,m:r,spatialReference:s}}case"polygon":{const{rings:t,hasZ:n,hasM:i}=e;return{rings:h(t),hasZ:n,hasM:i,spatialReference:s}}case"polyline":{const{paths:t,hasZ:n,hasM:i}=e;return{paths:h(t),hasZ:n,hasM:i,spatialReference:s}}case"extent":{const{xmin:t,xmax:n,ymin:i,ymax:r,zmin:o,zmax:a,mmin:l,mmax:h,hasZ:u,hasM:c}=e;return{xmin:t,xmax:n,ymin:i,ymax:r,zmin:o,zmax:a,mmin:l,mmax:h,hasZ:u,hasM:c,spatialReference:s}}case"multipoint":{const{points:t,hasZ:n,hasM:i}=e;return{points:c(t)?u(t):t,hasZ:n,hasM:i,spatialReference:s}}default:return}}(e))}function h(e){return function(e){for(const t of e)if(0!==t.length)return c(t);return!1}(e)?e.map((e=>u(e))):e}function u(e){return e.map((e=>Array.from(e)))}function c(e){return e.length>0&&((0,i.xZ)(e[0])||(0,i.fS)(e[0]))}function d(e,t){if(!e)return null;let n;if(a(e)){if(null==t)return e.clone();if(a(t))return t.copy(e)}return null!=t?(n=t,n.x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=void 0,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=void 0,n.hasM=!1)):(n=(0,s.T)(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}function p(e){const{wkid:t,wkt:n,wkt2:i,latestWkid:r}=e,s={wkid:t,wkt:n,wkt2:i,latestWkid:r};return o.Z.fromJSON(s)}},74509:(e,t,n)=>{n.d(t,{LR:()=>m,Ou:()=>h,Uy:()=>g,VW:()=>o,W_:()=>p,Wb:()=>_,jG:()=>v,kf:()=>f,mF:()=>s,tR:()=>y,vQ:()=>u,vu:()=>a,zx:()=>c});n(88152);function i(e){return e?v:y}function r(e,t){return null!==t&&void 0!==t&&t.mode?t.mode:i(e).mode}function s(e,t){return null!=t?t:i(e)}function o(e,t){return r(null!=e&&e.hasZ,t)}function a(e){const t=l(e);return o(e.geometry,t)}function l(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function h(e,t,n){var i,r;if(null===n||void 0===n||!n.mode)return;const s=e.hasZ?e.z:0,o=null!=n.offset?n.offset:0;switch(n.mode){case"absolute-height":return s-o;case"on-the-ground":return 0;case"relative-to-ground":return s-((null!==(i=t.elevationProvider.getElevation(e.x,e.y,s,e.spatialReference,"ground"))&&void 0!==i?i:0)+o);case"relative-to-scene":return s-((null!==(r=t.elevationProvider.getElevation(e.x,e.y,s,e.spatialReference,"scene"))&&void 0!==r?r:0)+o)}}function u(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,n,i)}function c(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return d(e,t[0],t[1],t.length>2?t[2]:0,n,i,r)}function d(e,t,n,i,r,s){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(null==s)return;const a=null!=o?o.mode:"absolute-height";if("on-the-ground"===a)return 0;const{absoluteZ:l}=function(e,t,n,i,r,s){const o=null!=s.offset?s.offset:0;switch(s.mode){case"absolute-height":return{absoluteZ:n+o,elevation:0};case"on-the-ground":{var a;const n=null!==(a=r.elevationProvider.getElevation(e,t,0,i,"ground"))&&void 0!==a?a:0;return{absoluteZ:n,elevation:n}}case"relative-to-ground":{var l;const s=null!==(l=r.elevationProvider.getElevation(e,t,n,i,"ground"))&&void 0!==l?l:0;return{absoluteZ:n+s+o,elevation:s}}case"relative-to-scene":{var h;const s=null!==(h=r.elevationProvider.getElevation(e,t,n,i,"scene"))&&void 0!==h?h:0;return{absoluteZ:n+s+o,elevation:s}}}}(t,n,i,r,e,s);return function(e,t,n,i,r,s,o,a){var l,h;const u=null!=(null===o||void 0===o?void 0:o.offset)?o.offset:0;switch(a){case"absolute-height":return e-u;case"relative-to-ground":return e-((null!==(l=s.elevationProvider.getElevation(t,n,i,r,"ground"))&&void 0!==l?l:0)+u);case"relative-to-scene":return e-((null!==(h=s.elevationProvider.getElevation(t,n,i,r,"scene"))&&void 0!==h?h:0)+u)}}(l,t,n,i,r,e,o,a)}function p(e,t){if(null==t)return!1;const{mode:n}=t;return null!=n&&("scene"===e&&"relative-to-scene"===n||"ground"===e&&"absolute-height"!==n)}function g(e,t,n){return n&&n.mode!==t?"".concat(e," only support ").concat(t," elevation mode"):null}function _(e,t,n){return(null===n||void 0===n?void 0:n.mode)===t?"".concat(e," do not support ").concat(t," elevation mode"):null}function f(e,t){return null!=(null===t||void 0===t?void 0:t.featureExpressionInfo)&&"0"!==t.featureExpressionInfo.expression?"".concat(e," do not support featureExpressionInfo"):null}function m(e,t){t&&e.warn(".elevationInfo=",t)}const v={mode:"absolute-height",offset:0},y={mode:"on-the-ground",offset:null}},45900:(e,t,n)=>{n.d(t,{m:()=>c});var i=n(27366),r=n(7138),s=n(32718),o=n(66978),a=n(49861),l=(n(25243),n(63780),n(93169),n(69912)),h=n(99034),u=n(92853);let c=class extends r.Z{constructor(e){super(e),this.manipulators=new u.D,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[h.bH.MANAGER,!0],[h.bH.USER,!0]]),this._creationFinishedResolver=(0,o.hh)()}get active(){return null!=this.view&&this.view.activeTool===this}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this._syncVisible())}get editable(){return this.getEditableFlag(h.bH.USER)}set editable(e){this.setEditableFlag(h.bH.USER,e)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){null!=this.view?(this.view.focus(),this.onActivate()):s.Z.getLogger(this).error("Can't activate tool if view is not defined.")}deactivate(){this.onDeactivate()}handleInputEvent(e){this.onInputEvent(e)}handleInputEventAfter(e){this.onInputEventAfter(e)}setEditableFlag(e,t){this._editableFlags.set(e,t),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),e===h.bH.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(e){var t;return null!==(t=this._editableFlags.get(e))&&void 0!==t&&t}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(e){}onInputEventAfter(e){}get internallyEditable(){return this.getEditableFlag(h.bH.USER)&&this.getEditableFlag(h.bH.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized)if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};(0,i._)([(0,a.Cb)({constructOnly:!0})],c.prototype,"view",void 0),(0,i._)([(0,a.Cb)({readOnly:!0})],c.prototype,"active",null),(0,i._)([(0,a.Cb)({value:!0})],c.prototype,"visible",null),(0,i._)([(0,a.Cb)({value:!0})],c.prototype,"editable",null),(0,i._)([(0,a.Cb)({readOnly:!0})],c.prototype,"manipulators",void 0),(0,i._)([(0,a.Cb)({readOnly:!0})],c.prototype,"updating",null),(0,i._)([(0,a.Cb)()],c.prototype,"cursor",null),(0,i._)([(0,a.Cb)({readOnly:!0})],c.prototype,"automaticManipulatorSelection",void 0),(0,i._)([(0,a.Cb)()],c.prototype,"hasFocusedManipulators",null),(0,i._)([(0,a.Cb)()],c.prototype,"hasGrabbedManipulators",void 0),(0,i._)([(0,a.Cb)()],c.prototype,"hasHoveredManipulators",void 0),(0,i._)([(0,a.Cb)()],c.prototype,"firstGrabbedManipulator",void 0),(0,i._)([(0,a.Cb)({readOnly:!0})],c.prototype,"created",void 0),(0,i._)([(0,a.Cb)({readOnly:!0})],c.prototype,"removeIncompleteOnCancel",void 0),c=(0,i._)([(0,l.j)("esri.views.interactive.InteractiveToolBase")],c)},92853:(e,t,n)=>{n.d(t,{D:()=>s});var i,r=n(40281);!function(e){e[e.WhenToolEditable=0]="WhenToolEditable",e[e.WhenToolNotEditable=1]="WhenToolNotEditable",e[e.Always=2]="Always"}(i||(i={}));class s{constructor(){this._isToolEditable=!0,this._manipulators=new r.Z,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(e){this._isToolEditable=e}get length(){return this._manipulators.length}add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.WhenToolEditable;this.addMany([e],t)}addMany(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.WhenToolEditable;for(const n of e){const e={manipulator:n,visibilityPredicate:t,attached:!1};this._manipulators.add(e),this._attached&&this._updateManipulatorAttachment(e)}}remove(e){for(let t=0;t<this._manipulators.length;t++)if(this._manipulators.at(t).manipulator===e){const e=this._manipulators.splice(t,1)[0];this._detachManipulator(e);break}}removeAll(){this._manipulators.forEach((e=>{this._detachManipulator(e)})),this._manipulators.removeAll()}attach(){this._manipulators.forEach((e=>{this._updateManipulatorAttachment(e)})),this._attached=!0}detach(){this._manipulators.forEach((e=>{this._detachManipulator(e)})),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach((e=>{let{manipulator:t}=e;return t.destroy()})),this._manipulators.destroy(),this._resourceContexts=null}on(e,t){return this._manipulators.on(e,(e=>{t(e)}))}forEach(e){for(const t of this._manipulators.items)e(t)}some(e){return this._manipulators.items.some(e)}toArray(){const e=[];return this.forEach((t=>e.push(t.manipulator))),e}intersect(e,t){let n=null,i=Number.MAX_VALUE;return this._manipulators.forEach((r=>{let{manipulator:s,attached:o}=r;if(!o||!s.interactive)return;const a=s.intersectionDistance(e,t);null!=a&&a<i&&(i=a,n=s)})),n}_updateManipulatorAttachment(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)}_attachManipulator(e){e.attached||(e.manipulator.attach&&e.manipulator.attach(this._resourceContexts),e.attached=!0)}_detachManipulator(e){if(!e.attached)return;const t=e.manipulator;t.grabbing=!1,t.dragging=!1,t.hovering=!1,t.selected=!1,t.detach&&t.detach(this._resourceContexts),e.attached=!1}_isManipulatorItemVisible(e){return e.visibilityPredicate===i.Always||(this._isToolEditable?e.visibilityPredicate===i.WhenToolEditable:e.visibilityPredicate===i.WhenToolNotEditable)}}},14813:(e,t,n)=>{n.d(t,{Y6:()=>g});var i,r=n(88396),s=n(6394),o=n(11186),a=n(71353),l=n(90045),h=n(67077),u=n(585);!function(e){e[e.Z=0]="Z",e[e.M=1]="M"}(i||(i={}));class c{constructor(e){this.spatialReference=e}createVector(){return this._tag((0,s.a)())}pointToVector(e){return this._tag((0,s.f)(e.x,e.y))}arrayToVector(e){return this._tag((0,s.f)(e[0],e[1]))}vectorToArray(e){return[e[0],e[1]]}pointToArray(e){return[e.x,e.y]}vectorToPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new u.Z;return t.x=e[0],t.y=e[1],t.z=void 0,t.m=void 0,t.spatialReference=this.spatialReference,t}arrayToPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new u.Z;return t.x=e[0],t.y=e[1],t.z=void 0,t.m=void 0,t.spatialReference=this.spatialReference,t}vectorToDehydratedPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"};return t.x=e[0],t.y=e[1],t.z=void 0,t.m=void 0,t.hasZ=!1,t.hasM=!1,t.spatialReference=this.spatialReference,t}lerp(e,t,n,i){return(0,r.l)(i,e,t,n)}addDelta(e,t,n){e[0]+=t,e[1]+=n}distance(e,t){return(0,r.d)(e,t)}getZ(e){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0}hasZ(){return!1}getM(e){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0}hasM(){return!1}clone(e){return this._tag((0,s.b)(e))}copy(e,t){return(0,r.j)(t,e)}fromXYZ(e){return this._tag((0,s.f)(e[0],e[1]))}toXYZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.c)();return(0,o.s)(t,e[0],e[1],0)}pointToXYZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.c)();return(0,o.s)(t,e.x,e.y,0)}equals(e,t){return(0,r.o)(e,t)}_tag(e){return e}}class d{constructor(e,t){this._valueType=e,this.spatialReference=t}createVector(){return this._tag((0,a.c)())}pointToVector(e){return this._tag((0,a.f)(e.x,e.y,this._valueType===i.Z?e.z:e.m))}arrayToVector(e){return this._tag((0,a.f)(e[0],e[1],e[2]||0))}vectorToArray(e){return[e[0],e[1],e[2]]}pointToArray(e){return this._valueType===i.Z?[e.x,e.y,e.z]:[e.x,e.y,e.m]}vectorToPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new u.Z;return t.x=e[0],t.y=e[1],t.z=this._valueType===i.Z?e[2]:void 0,t.m=this._valueType===i.M?e[2]:void 0,t.spatialReference=this.spatialReference,t}arrayToPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new u.Z;return t.x=e[0],t.y=e[1],t.z=this._valueType===i.Z?e[2]:void 0,t.m=this._valueType===i.M?e[2]:void 0,t.spatialReference=this.spatialReference,t}vectorToDehydratedPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"};const n=this._valueType===i.Z,r=this._valueType===i.M;return t.x=e[0],t.y=e[1],t.z=n?e[2]:void 0,t.m=r?e[2]:void 0,t.hasZ=n,t.hasM=r,t.spatialReference=this.spatialReference,t}lerp(e,t,n,i){return(0,o.p)(i,e,t,n)}addDelta(e,t,n,r){e[0]+=t,e[1]+=n,this._valueType===i.Z&&(e[2]+=r)}distance(e,t){return this._valueType===i.Z?(0,o.o)(e,t):(0,r.d)(e,t)}getZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this._valueType===i.Z?e[2]:t}hasZ(){return this._valueType===i.Z}getM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this._valueType===i.M?e[2]:t}hasM(){return this._valueType===i.M}clone(e){return this._tag((0,a.e)(e))}copy(e,t){return(0,o.c)(t,e)}fromXYZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this._tag((0,a.f)(e[0],e[1],this._valueType===i.Z?e.length>2?e[2]:t:n))}toXYZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.c)();return(0,o.s)(t,e[0],e[1],this._valueType===i.Z?e[2]:0)}pointToXYZ(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.c)();return(0,o.s)(n,e.x,e.y,this._valueType===i.Z&&null!==(t=e.z)&&void 0!==t?t:0)}equals(e,t){return(0,o.G)(e,t)}_tag(e){return e}}class p{constructor(e){this.spatialReference=e}createVector(){return this._tag((0,h.c)())}pointToVector(e){return this._tag((0,h.f)(e.x,e.y,e.z,e.m))}arrayToVector(e){return this._tag((0,h.f)(e[0],e[1],e[2]||0,e[3]||0))}vectorToArray(e){return[e[0],e[1],e[2],e[3]]}pointToArray(e){return[e.x,e.y,e.z,e.m]}vectorToPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new u.Z;return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.spatialReference=this.spatialReference,t}arrayToPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new u.Z;return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.spatialReference=this.spatialReference,t}vectorToDehydratedPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"};return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.hasZ=!0,t.hasM=!0,t.spatialReference=this.spatialReference,t}lerp(e,t,n,i){return(0,l.l)(i,e,t,n)}addDelta(e,t,n,i){e[0]+=t,e[1]+=n,e[2]+=i}distance(e,t){return(0,o.o)(e,t)}getZ(e){return e[2]}hasZ(){return!0}getM(e){return e[3]}hasM(){return!0}clone(e){return this._tag((0,h.b)(e))}copy(e,t){return(0,l.c)(t,e)}fromXYZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this._tag((0,h.f)(e[0],e[1],e.length>2?e[2]:t,n))}toXYZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.c)();return(0,o.s)(t,e[0],e[1],e[2])}pointToXYZ(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.c)();return(0,o.s)(n,e.x,e.y,null!==(t=e.z)&&void 0!==t?t:0)}equals(e,t){return(0,l.e)(e,t)}_tag(e){return e}}function g(e,t,n){return e&&t?new p(n):t?new d(i.M,n):e?new d(i.Z,n):new c(n)}},21641:(e,t,n)=>{n.d(t,{hM:()=>E,Xd:()=>g,a9:()=>_,di:()=>v,BS:()=>b,Cf:()=>m});n(59486),n(63780),n(93169);var i,r=n(84652),s=(n(16889),n(71353),n(45925)),o=n(37818);!function(e){e[e.EnableFastUpdates=0]="EnableFastUpdates",e[e.DisableFastUpdates=1]="DisableFastUpdates",e[e.UpdateFastLocalOrigin=2]="UpdateFastLocalOrigin"}(i||(i={}));var a=n(74509),l=n(50951),h=(n(65156),n(376),n(69662));function u(e,t,n,i){var r,s;if(null==i||e.hasZ||(i=void 0),"point"===e.type)return e.x+=t,e.y+=n,e.hasZ&&null!=i&&(e.z+=i),e;if("multipoint"===e.type){const r=e.points;for(let e=0;e<r.length;e++)r[e]=c(r[e],t,n,i);return e}if("extent"===e.type)return e.xmin+=t,e.xmax+=t,e.ymin+=n,e.ymax+=n,null!=i&&(null!==(r=e.zmin)&&void 0!==r||(e.zmin=0),e.zmin+=i,null!==(s=e.zmax)&&void 0!==s||(e.zmax=0),e.zmax+=i),e;const o=(0,h.nA)(e),a="polyline"===e.type?e.paths:e.rings;for(let l=0;l<o.length;l++){const e=o[l];for(let r=0;r<e.length;r++)e[r]=c(e[r],t,n,i)}return"paths"in e?e.paths=a:e.rings=a,e}function c(e,t,n,i){return d(e,e[0]+t,e[1]+n,null!=e[2]&&null!=i?e[2]+i:void 0)}function d(e,t,n,i){const r=[t,n];return e.length>2&&r.push(null!=i?i:e[2]),e.length>3&&r.push(e[3]),r}var p=n(585);function g(e,t){return e.events.on("drag",function(e,t){let n=null,i=null;return r=>{if("cancel"===r.action)return void(null!=i&&(i.execute({action:"cancel"}),n=null,i=null));const s={action:r.action,screenStart:r.start,screenEnd:r.screenPoint};"start"===r.action&&null==n&&(n=new E,i=new E,t(e,n,i,r.pointerType,s)),null!=n&&n.execute(s),"end"===r.action&&null!=n&&(n=null,i=null)}}(e,t))}function _(e,t){let n=null;return r=>{if("start"===r.action&&(n=function(e,t,n){const r=e.geometry,a=(0,o.D)(t);if(null==r)return null;if("mesh"===r.type)return function(e,t,n,r){if(t.vertexSpace.isRelative)return function(e,t,n,r){const o=f(n.getOriginPoint(t.spatialReference),r),a=t.spatialReference;return null==o?null:{move:(t,r,l,h)=>{const c=u(o.clone(),t,r,l);if(c.spatialReference.equals(a))n.setOriginFromPoint(c);else{const e=(0,s.project)(c,a);null!=e&&n.setOriginFromPoint(e)}if(n.isGeoreferenced)e.notifyGeometryChanged();else{const t="end"===h;e.notifyMeshTransformChanged(t?{action:i.UpdateFastLocalOrigin}:{})}}}}(e,t,t.vertexSpace,n);if(!t.spatialReference.equals(n))return null;let o=0,a=0,h=0;return{move:(n,i,s)=>{const u=n-o,c=i-a,d=s-h;if(u||c||d){var g;const _=new p.Z(t.origin.x+u,t.origin.y+c,(null!==(g=t.origin.z)&&void 0!==g?g:0)+d,t.origin.spatialReference);t.centerAt(_,{geographic:t.vertexSpace.isRelative?void 0:r===l.JY.Global}),e.notifyGeometryChanged(),o=n,a=i,h=s}}}}(e,r,a,n);const h=f(r,a),c=r.spatialReference;return null==h?null:{move:(t,n,i)=>{const r=u(h.clone(),t,n,i);r.spatialReference.equals(c)?e.geometry=r:e.geometry=(0,s.project)(r,c)}}}(e,r.mapStart.spatialReference,t)),null==n)return null;const a=r.mapEnd.x-r.mapStart.x,h=r.mapEnd.y-r.mapStart.y,c=r.mapEnd.z-r.mapStart.z;return n.move(a,h,c,r.action),{...r,translationX:a,translationY:h,translationZ:c}}}function f(e,t){return null==e?null:e.spatialReference.equals(t)?e.clone():(0,s.project)(e,t)}function m(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0,r=null;const o=null==n||null!==(t=e.spatialReference)&&void 0!==t&&t.equals(n)?e=>e:e=>null!=e?(0,s.project)(e,n):e,a={exclude:[],...i};return t=>{if("start"===t.action&&(r=o(e.toMap(t.screenStart,a))),null==r)return null;const n=o(e.toMap(t.screenEnd,a));return null!=n?{...t,mapStart:r,mapEnd:n}:null}}function v(e,t){const n=new Map;for(const i of t)n.set(i,(0,r.d9)(e[i]));return t=>(n.forEach(((t,n)=>{e[n]=t})),t)}const y=()=>{};class E{constructor(){this.execute=y}next(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new E;return null!=e&&(this.execute=n=>{const i=e(n);null!=i&&t.execute(i)}),t}}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if("2d"===e.type)return e=>e;let i=null;return r=>{"start"===r.action&&(i=e.toMap(r.screenStart,{exclude:n}),null!=i&&(i.z=(0,a.Ou)(i,e,t)));const s=e.toMap(r.screenEnd,{exclude:n});null!=s&&(s.z=(0,a.Ou)(s,e,t));const o=null!=i&&null!=s?{sceneStart:i,sceneEnd:s}:null;return{...r,scenePoints:o}}}},84954:(e,t,n)=>{n.d(t,{wA:()=>d,kS:()=>c,XE:()=>p,Xz:()=>u});var i=n(63780),r=n(91505),s=n(80885),o=n(29909),a=n(14813),l=n(92975),h=n(50951);class u{constructor(e){this.component=e,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}get pos(){return this._pos}set pos(e){this._pos=e,this.component.unnormalizeVertexPositions()}}class c{constructor(e,t,n){this.component=e,this.leftVertex=t,this.rightVertex=n,this.type="edge",t.rightEdge=this,n.leftEdge=this}}class d{constructor(e,t){this._spatialReference=e,this._viewingMode=t,this.vertices=[],this.edges=[],this.index=null}unnormalizeVertexPositions(){this.vertices.length<=1||function(e,t){if(!t.supported)return;let n=1/0,i=-1/0;const r=t.upperBoundX-t.lowerBoundX;e.forEach((e=>{let s=e.pos[0];for(;s<t.lowerBoundX;)s+=r;for(;s>t.upperBoundX;)s-=r;n=Math.min(n,s),i=Math.max(i,s),e.pos[0]=s}));const s=i-n;r-s<s&&e.forEach((e=>{e.pos[0]<0&&(e.pos[0]+=r)}))}(this.vertices,function(e,t){const n=(0,l.C5)(e);return t===h.JY.Global&&n?{supported:!0,lowerBoundX:n.valid[0],upperBoundX:n.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}(this._spatialReference,this._viewingMode))}updateVertexIndex(e,t){if(0===this.vertices.length)return;const n=this.vertices[0];let i=null,r=e,s=t;do{i=r,i.index=s++,r=i.rightEdge?i.rightEdge.rightVertex:null}while(null!=r&&r!==n);i.leftEdge&&i!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(i),this.vertices.length-1)}getFirstVertex(){return 0===this.vertices.length?null:this.vertices[0]}getLastVertex(){return 0===this.vertices.length?null:this.vertices[this.vertices.length-1]}isClosed(){return this.vertices.length>2&&null!==this.vertices[0].leftEdge}swapVertices(e,t){const n=this.vertices[e];this.vertices[e]=this.vertices[t],this.vertices[t]=n}iterateVertices(e){if(0===this.vertices.length)return;const t=this.vertices[0];let n=t;do{e(n,n.index),n=null!=n.rightEdge?n.rightEdge.rightVertex:null}while(n!==t&&null!=n)}}class p extends r.Z{constructor(e,t){super(),this.type=e,this.coordinateHelper=t,this._geometry=null,this._dirty=!0,this.components=[]}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this._toPoint();break;case"polyline":this._geometry=this._toPolyline();break;case"polygon":this._geometry=this._toPolygon()}this._dirty=!1}return this._geometry}get spatialReference(){return this.coordinateHelper.spatialReference}notifyChanges(e){this._dirty=!0,this.emit("change",e)}_toPoint(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}_toPolyline(){const e=[],t=this.coordinateHelper.vectorToArray;for(const n of this.components){if(n.vertices.length<1)continue;const i=[];let r=n.vertices.find((e=>null==e.leftEdge));const s=r;do{i.push(t(r.pos)),r=r.rightEdge?r.rightEdge.rightVertex:null}while(r&&r!==s);e.push(i)}return new o.Z({paths:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}_toPolygon(){const e=[],t=this.coordinateHelper.vectorToArray;for(const n of this.components){if(n.vertices.length<1)continue;const i=[],r=n.vertices[0];let s=r;const o=s;do{i.push(t(s.pos)),s=null!=s.rightEdge?s.rightEdge.rightVertex:null}while(s&&s!==o);n.isClosed()&&i.push(t(r.pos)),e.push(i)}return new s.Z({rings:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(e,t){const n=e.spatialReference,r=(0,a.Y6)(e.hasZ,e.hasM,n),s=new p(e.type,r);switch(e.type){case"polygon":{const o=e.rings;for(let e=0;e<o.length;++e){const a=o[e],l=new d(n,t);l.index=e;const h=a.length>2&&(0,i.fS)(a[0],a[a.length-1]),p=h?a.length-1:a.length;for(let e=0;e<p;++e){const t=r.arrayToVector(a[e]),n=new u(l);l.vertices.push(n),n.pos=t,n.index=e}const g=l.vertices.length-1;for(let e=0;e<g;++e){const t=l.vertices[e],n=l.vertices[e+1],i=new c(l,t,n);l.edges.push(i)}if(h){const e=new c(l,l.vertices[l.vertices.length-1],l.vertices[0]);l.edges.push(e)}s.components.push(l)}break}case"polyline":{const i=e.paths;for(let e=0;e<i.length;++e){const o=i[e],a=new d(n,t);a.index=e;const l=o.length;for(let e=0;e<l;++e){const t=r.arrayToVector(o[e]),n=new u(a);a.vertices.push(n),n.pos=t,n.index=e}const h=a.vertices.length-1;for(let e=0;e<h;++e){const t=a.vertices[e],n=a.vertices[e+1],i=new c(a,t,n);a.edges.push(i)}s.components.push(a)}break}case"point":{const i=new d(n,t);i.index=0;const o=new u(i);o.index=0,o.pos=r.pointToVector(e),i.vertices.push(o),s.components.push(i);break}}return s}}},95172:(e,t,n)=>{n.d(t,{c:()=>L});var i,r,s=n(91505),o=n(42537),a=n(84954);!function(e){e[e.NEW_STEP=0]="NEW_STEP",e[e.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS"}(i||(i={}));class l{constructor(e,t,n){this._editGeometry=e,this._component=t,this._pos=n,this._addedVertex=null,this._originalEdge=null,this._left=null,this._right=null}apply(){let e="redo";null==this._addedVertex&&(e="apply",this._addedVertex=new a.Xz(this._component));const t=this._component.getLastVertex();if(null==t)this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=0;else{let e=null;t.rightEdge&&(this._originalEdge=t.rightEdge,e=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1)),this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,null==this._left&&(this._left=new a.kS(this._component,t,this._addedVertex)),this._component.edges.push(this._left),t.rightEdge=this._left,null!=this._originalEdge&&null!=e&&(null==this._right&&(this._right=new a.kS(this._component,this._addedVertex,e)),this._component.edges.push(this._right),e.leftEdge=this._right),this._component.updateVertexIndex(this._addedVertex,t.index+1)}this._editGeometry.notifyChanges({operation:e,addedVertices:[this._addedVertex]})}undo(){null!=this._addedVertex&&(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),null!=this._left&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),null!=this._right&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),null!=this._originalEdge&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),null!=this._left?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))}accumulate(){return!1}}class h{constructor(e,t,n){this._editGeometry=e,this._vertices=t,this.operation=n,this._undone=!1}apply(){this._vertices.forEach((e=>this.operation.apply(e))),this._editGeometry.components.forEach((e=>e.unnormalizeVertexPositions())),this._editGeometry.notifyChanges({operation:this._undone?"redo":"apply",updatedVertices:this._vertices})}undo(){this._vertices.forEach((e=>this.operation.undo(e))),this._editGeometry.notifyChanges({operation:"undo",updatedVertices:this._vertices}),this._undone=!0}canAccumulate(e){if(this._undone||e._vertices.length!==this._vertices.length)return!1;for(let t=0;t<e._vertices.length;++t)if(e._vertices[t]!==this._vertices[t])return!1;return this.operation.canAccumulate(e.operation)}accumulate(e){return!!(e instanceof h&&this.canAccumulate(e))&&(this._vertices.forEach((t=>this.operation.accumulate(t,e.operation))),this.operation.accumulateParams(e.operation),this._editGeometry.components.forEach((e=>e.unnormalizeVertexPositions())),this._editGeometry.notifyChanges({operation:"apply",updatedVertices:this._vertices}),!0)}}!function(e){e[e.CUMULATIVE=0]="CUMULATIVE",e[e.REPLACE=1]="REPLACE"}(r||(r={}));class u{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._editGeometry=e,this._vertices=t,this._minNumberOfVertices=n,this.removedVertices=null}apply(){let e="redo";if(null==this.removedVertices){const t=this.removedVertices=[];this._vertices.forEach((e=>{const n=this._removeVertex(e);null!=n&&t.push(n)})),e="apply"}else this.removedVertices.forEach((e=>{this._removeVertex(e.removedVertex)}));this._editGeometry.notifyChanges({operation:e,removedVertices:this._vertices})}undo(){var e;null!==(e=this.removedVertices)&&void 0!==e&&e.forEach((e=>{this._undoRemoveVertex(e)})),this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})}accumulate(){return!1}_removeVertex(e){const t=e.component;if(t.vertices.length<=this._minNumberOfVertices)return null;const n={removedVertex:e,createdEdge:null},i=e.leftEdge,r=e.rightEdge;return t.vertices.splice(t.vertices.indexOf(e),1),i&&(t.edges.splice(t.edges.indexOf(i),1),i.leftVertex.rightEdge=null),r&&(t.edges.splice(t.edges.indexOf(r),1),r.rightVertex.leftEdge=null),0===e.index&&r&&this._vertices.length>0&&t.swapVertices(t.vertices.indexOf(r.rightVertex),0),i&&r&&(n.createdEdge=new a.kS(t,i.leftVertex,r.rightVertex),t.edges.push(n.createdEdge)),r&&t.updateVertexIndex(r.rightVertex,r.rightVertex.index-1),n}_undoRemoveVertex(e){const t=e.removedVertex,n=e.removedVertex.component,i=t.leftEdge,r=t.rightEdge;e.createdEdge&&n.edges.splice(n.edges.indexOf(e.createdEdge),1),n.vertices.push(t),i&&(n.edges.push(i),i.leftVertex.rightEdge=i),r&&(n.edges.push(r),r.rightVertex.leftEdge=r),n.updateVertexIndex(t,t.index)}}class c{constructor(e,t,n){this._editGeometry=e,this._edge=t,this._t=n,this.createdVertex=null,this._left=null,this._right=null}apply(){let e="redo";const t=this._edge,n=t.component,i=t.leftVertex,r=t.rightVertex;n.edges.splice(n.edges.indexOf(t),1),null==this.createdVertex&&(e="apply",this.createdVertex=new a.Xz(t.component)),n.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(t.leftVertex.pos,t.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),null==this._left&&(this._left=new a.kS(n,i,this.createdVertex)),this._left.leftVertex.leftEdge?n.edges.push(this._left):n.edges.unshift(this._left),i.rightEdge=this._left,null==this._right&&(this._right=new a.kS(n,this.createdVertex,r)),n.edges.push(this._right),r.leftEdge=this._right,n.updateVertexIndex(this.createdVertex,i.index+1),this._editGeometry.notifyChanges({operation:e,addedVertices:[this.createdVertex]})}undo(){if(null==this.createdVertex||null==this._left||null==this._right)return null;const e=this._edge,t=e.component,n=this.createdVertex.leftEdge,i=this.createdVertex.rightEdge,r=null===n||void 0===n?void 0:n.leftVertex,s=null===i||void 0===i?void 0:i.rightVertex;t.vertices.splice(t.vertices.indexOf(this.createdVertex),1),t.edges.splice(t.edges.indexOf(this._left),1),t.edges.splice(t.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?t.edges.push(this._edge):t.edges.unshift(this._edge),r&&(r.rightEdge=e),s&&(s.leftEdge=e),r&&t.updateVertexIndex(r,r.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}}class d{constructor(e,t,n){this._editGeometry=e,this._vertex=t,this._pos=n}apply(){const e=null==this._originalPosition;e&&(this._originalPosition=this._vertex.pos),this._apply(e?"apply":"redo")}undo(){this._vertex.pos=this._originalPosition,this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})}accumulate(e){return e instanceof d&&e._vertex===this._vertex&&(this._pos=e._pos,this._apply("apply"),!0)}_apply(e){this._vertex.pos=this._pos,this._editGeometry.components.forEach((e=>e.unnormalizeVertexPositions())),this._editGeometry.notifyChanges({operation:e,updatedVertices:[this._vertex]})}}var p=n(63780);class g{constructor(e,t){this._editGeometry=e,this._component=t,this._createdEdge=null}apply(){let e="redo";if(null==this._createdEdge){e="apply";const t=this._component.getFirstVertex(),n=this._component.getLastVertex();if(this._component.isClosed()||this._component.vertices.length<3||null==t||null==n)return;this._createdEdge=new a.kS(this._component,n,t)}this._createdEdge.leftVertex.rightEdge=this._createdEdge,this._createdEdge.rightVertex.leftEdge=this._createdEdge,this._component.edges.push(this._createdEdge),this._editGeometry.notifyChanges({operation:e})}undo(){null!=this._createdEdge&&((0,p.Od)(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))}accumulate(){return!1}}class _{constructor(e,t,n,i){this._helper=e,this.dx=t,this.dy=n,this.dz=i}_move(e,t,n,i){this._helper.addDelta(e.pos,t,n,i)}apply(e){this._move(e,this.dx,this.dy,this.dz)}undo(e){this._move(e,-this.dx,-this.dy,-this.dz)}canAccumulate(e){return e instanceof _}accumulate(e,t){this._move(e,t.dx,t.dy,t.dz)}accumulateParams(e){this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz}}var f=n(16889),m=n(88396),v=n(6394),y=n(11186),E=n(71353),b=n(55652),x=n(40927),T=n(94163);class M{get plane(){return this._plane}get requiresSplitEdgeLeft(){return!this._left.isOriginalDirection}get requiresSplitEdgeRight(){return!this._right.isOriginalDirection}get edgeDirection(){return this._edgeDirection}constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:S.IMMEDIATE;this._helper=e,this._planeType=t,this._edge=n,this.distance=i,this._plane=(0,b.Ue)(),this._offsetPlane=(0,b.Ue)(),this._minDistance=-1/0,this._maxDistance=1/0,this._selectedArrow=1,r===S.IMMEDIATE&&this._initialize()}_initialize(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}_initializeNeighbors(){var e,t;const n=this._toXYZ(this._edge.leftVertex.pos),i=this._toXYZ(null===(e=this._edge.leftVertex.leftEdge)||void 0===e||null===(e=e.leftVertex)||void 0===e?void 0:e.pos),r=this._toXYZ(this._edge.rightVertex.pos),s=this._toXYZ(null===(t=this._edge.rightVertex.rightEdge)||void 0===t||null===(t=t.rightVertex)||void 0===t?void 0:t.pos);this._edgeDirection=(0,y.C)((0,E.c)(),n,r),this._left=this._computeNeighbor(n,i,this._edgeDirection),this._right=this._computeNeighbor(r,s,this._edgeDirection)}_toXYZ(e){return null!=e?this._helper.toXYZ(e):null}_pointToXYZ(e){return this._toXYZ(this._helper.pointToVector(e))}_computeNeighbor(e,t,n){if(null==t)return{start:e,end:t,direction:(0,E.f)(-n[1],n[0],0),isOriginalDirection:!0};const i=(0,y.C)((0,E.c)(),e,t),r=!this._passesBisectingAngleThreshold(i,n);return{start:e,end:t,direction:r?this._bisectVectorsPerpendicular(n,i):i,isOriginalDirection:!r}}_passesBisectingAngleThreshold(e,t){const n=Math.abs((0,x.EU)(t,e));return n>=w&&n<=Math.PI-w}_bisectVectorsPerpendicular(e,t){const n=(0,y.j)(e,t)<0?e:(0,y.E)((0,E.c)(),e),i=Math.abs((0,y.j)(n,t));if(!(i<A||i>1-A))return this._bisectDirection(n,t);const r=(0,y.b)((0,E.c)(),n,[0,0,1]);return(0,y.n)(r,r)}_bisectDirection(e,t){const n=(0,y.g)((0,E.c)(),e,t);return(0,y.n)(n,n)}_initializePlane(){const e=this._computeNormalDirection(this._left),t=this._computeNormalDirection(this._right);(0,y.j)(e,t)<0&&(0,y.E)(t,t),(0,b.Yq)(this._left.start,this._bisectDirection(e,t),this._plane)}_computeNormalDirection(e){const t=(0,y.b)((0,E.c)(),e.direction,this._edgeDirection);(0,y.n)(t,t);const n=(0,y.b)((0,E.c)(),this._edgeDirection,t);return this._planeType===R.XY&&(n[2]=0),(0,y.n)(n,n)}_initializeDistanceConstraints(){null==this._left.end||this.requiresSplitEdgeLeft||this._updateDistanceConstraint((0,b.jH)(this._plane,this._left.end)),null==this._right.end||this.requiresSplitEdgeRight||this._updateDistanceConstraint((0,b.jH)(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}_updateDistanceConstraint(e){e<=0&&(this._minDistance=Math.max(this._minDistance,e)),e>=0&&(this._maxDistance=Math.min(this._maxDistance,e))}_updateIntersectDistanceConstraint(e){const t=(0,b.mJ)(e),n=this._edgeDirection,i=(0,y.g)((0,E.c)(),this._left.start,this._left.direction),r=(0,y.g)((0,E.c)(),this._right.start,this._right.direction),s=this._pointInBasis2D((0,v.a)(),t,n,this._left.start),o=this._pointInBasis2D((0,v.a)(),t,n,i),a=this._pointInBasis2D((0,v.a)(),t,n,this._right.start),l=this._pointInBasis2D((0,v.a)(),t,n,r),[h]=(0,T.dU)({start:o,end:s,type:T.SP.LINE},{start:l,end:a,type:T.SP.LINE});if(!h)return;const u=(0,m.c)((0,v.a)(),s,o);(0,m.e)(u,u);const c=(0,m.c)((0,v.a)(),h,o),d=(0,m.g)(u,c),p=(0,y.g)((0,E.c)(),i,(0,y.i)((0,E.c)(),this._left.direction,-d)),g=(0,b.jH)(e,p);this._updateDistanceConstraint(g)}_pointInBasis2D(e,t,n,i){return e[0]=(0,x.SR)(t,i),e[1]=(0,x.SR)(n,i),e}_offset(e,t){Number.isFinite(this._minDistance)&&(t=Math.max(this._minDistance,t)),Number.isFinite(this._maxDistance)&&(t=Math.min(this._maxDistance,t)),(0,b.JG)(this._offsetPlane,this._plane),this._offsetPlane[3]-=t;const n=(e,t,n)=>null!=t&&(0,b.fn)(this._offsetPlane,e,(0,y.g)((0,E.c)(),e,t),n),i=(0,E.c)();(e===this._edge.leftVertex?n(this._left.start,this._left.direction,i):n(this._right.start,this._right.direction,i))&&this._helper.copy(this._helper.fromXYZ(i,void 0,this._helper.getM(e.pos)),e.pos)}selectArrowFromStartPoint(e){this._selectedArrow=(0,b.Ac)(this.plane,this._pointToXYZ(e))?1:-1}get selectedArrow(){return this._selectedArrow}signedDistanceToPoint(e){return(0,b.jH)(this.plane,this._pointToXYZ(e))}apply(e){this._offset(e,this.distance)}undo(e){this._offset(e,0)}canAccumulate(e){return e instanceof M&&this._edge.leftVertex.index===e._edge.leftVertex.index&&this._edge.rightVertex.index===e._edge.rightVertex.index&&this._edge.component===e._edge.component&&this._maybeEqualsVec3(this._left.direction,e._left.direction)&&this._maybeEqualsVec3(this._right.direction,e._right.direction)&&(0,y.G)((0,b.mJ)(this._plane),(0,b.mJ)(e._plane))}accumulate(e,t){const n=this._plane[3]-t._plane[3]+t.distance;this._offset(e,n)}accumulateParams(e){const t=e.distance-e._plane[3];this.distance=t+this._plane[3]}clone(){const e=new M(this._helper,this._planeType,this._edge,this.distance,S.DEFERRED);return(0,b.JG)(e._plane,this._plane),(0,b.JG)(e._offsetPlane,this._offsetPlane),e._maxDistance=this._maxDistance,e._minDistance=this._minDistance,e._left=this._cloneNeighbor(this._left),e._right=this._cloneNeighbor(this._right),e._edgeDirection=(0,y.c)((0,E.c)(),this._edgeDirection),e}_maybeEqualsVec3(e,t){return null==e&&null==t||null!=e&&null!=t&&(0,y.G)(e,t)}_cloneNeighbor(e){let{start:t,end:n,direction:i,isOriginalDirection:r}=e;return{start:(0,y.c)((0,E.c)(),t),end:null!=n?(0,y.c)((0,E.c)(),n):null,direction:(0,y.c)((0,E.c)(),i),isOriginalDirection:r}}}const w=(0,f.Vl)(15),A=.001;var R,S;!function(e){e[e.XYZ=0]="XYZ",e[e.XY=1]="XY"}(R||(R={})),function(e){e[e.IMMEDIATE=0]="IMMEDIATE",e[e.DEFERRED=1]="DEFERRED"}(S||(S={}));class C{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.CUMULATIVE;this.origin=e,this.angle=t,this._accumulationType=n}_rotate(e,t){(0,m.r)(e.pos,e.pos,this.origin,t)}apply(e){this._rotate(e,this.angle)}undo(e){this._rotate(e,-this.angle)}canAccumulate(e){return e instanceof C&&(0,p.fS)(this.origin,e.origin)}accumulate(e,t){const n=t._accumulationType===r.REPLACE;this._rotate(e,n?t.angle-this.angle:t.angle)}accumulateParams(e){const t=e._accumulationType===r.REPLACE;this.angle=t?e.angle:this.angle+e.angle}}class I{constructor(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.CUMULATIVE;this.origin=e,this.axis1=t,this.factor1=n,this.factor2=i,this._accumulationType=s,this.axis2=(0,v.f)(t[1],-t[0])}_scale(e,t,n){(0,m.u)(e.pos,e.pos,this.origin,this.axis1,t),(0,m.u)(e.pos,e.pos,this.origin,this.axis2,n)}apply(e){this._scale(e,this.factor1,this.factor2)}undo(e){this._scale(e,1/this.factor1,1/this.factor2)}canAccumulate(e){return e instanceof I&&(0,p.fS)(this.origin,e.origin)&&(0,p.fS)(this.axis1,e.axis1)}accumulate(e,t){t._accumulationType===r.REPLACE?this._scale(e,t.factor1/this.factor1,t.factor2/this.factor2):this._scale(e,t.factor1,t.factor2)}accumulateParams(e){const t=e._accumulationType===r.REPLACE;this.factor1=t?e.factor1:this.factor1*e.factor1,this.factor2=t?e.factor2:this.factor2*e.factor2}}class V{constructor(){this._operations=[],this._closed=!1}close(){this._closed=!0}apply(){for(const e of this._operations)e.apply()}undo(){for(let e=this._operations.length-1;e>=0;e--)this._operations[e].undo()}accumulate(e){if(this._closed)return!1;const t=this._operations.length?this._operations[this._operations.length-1]:null;return t&&t.accumulate(e)||(this._operations.push(e),e.apply()),!0}}class L extends s.Z{constructor(e){super(),this.data=e,this._undoStack=[],this._redoStack=[],this._listener=this.data.on("change",(e=>{e.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:e.addedVertices,operation:e.operation}),e.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:e.removedVertices,operation:e.operation}),e.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:e.updatedVertices,operation:e.operation})}))}destroy(){this._listener.remove()}splitEdge(e,t){return this._apply(new c(this.data,e,t))}updateVertices(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.ACCUMULATE_STEPS;return this._apply(new h(this.data,e,t),n)}moveVertices(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i.ACCUMULATE_STEPS;return this.updateVertices(e,new _(this.data.coordinateHelper,t,n,r),s)}scaleVertices(e,t,n,s,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i.ACCUMULATE_STEPS,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:r.CUMULATIVE;return this.updateVertices(e,new I(t,n,s,o,l),a)}rotateVertices(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.ACCUMULATE_STEPS,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.CUMULATIVE;return this.updateVertices(e,new C(t,n,o),s)}removeVertices(e){return this._apply(new u(this.data,e,this._minNumVerticesPerType))}appendVertex(e){return 0===this.data.components.length?null:this._apply(new l(this.data,this.data.components[0],e))}setVertexPosition(e,t){return this._apply(new d(this.data,e,t))}offsetEdge(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.ACCUMULATE_STEPS;return this.updateVertices([t.leftVertex,t.rightVertex],new M(this.data.coordinateHelper,e,t,n),r)}closeComponent(e){return this.data.components.includes(e)?this._apply(new g(this.data,e)):null}canRemoveVertex(e){return e.vertices.length>this._minNumVerticesPerType}createUndoGroup(){const e=new V;return this._apply(e),(0,o.kB)((()=>e.close()))}undo(){if(this._undoStack.length>0){const e=this._undoStack.pop();return e.undo(),this._redoStack.push(e),e}return null}redo(){if(this._redoStack.length>0){const e=this._redoStack.pop();return e.apply(),this._undoStack.push(e),e}return null}get canUndo(){return this._undoStack.length>0}get canRedo(){return this._redoStack.length>0}get lastOperation(){return this._undoStack.length>0?this._undoStack[this._undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}_apply(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.ACCUMULATE_STEPS)!==i.NEW_STEP&&null!=this.lastOperation&&this.lastOperation.accumulate(e)||(e.apply(),this._undoStack.push(e),this._redoStack=[]),e}static fromGeometry(e,t){return new L(a.XE.fromGeometry(e,t))}}},87888:(e,t,n)=>{n.d(t,{Kj:()=>r,Sn:()=>i});const i={redo:"r",undo:"z",center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},r={toggle:"Control"}},38054:(e,t,n)=>{n.d(t,{Ju:()=>d,SN:()=>c,Ue:()=>o,al:()=>l,d9:()=>h,j7:()=>u,uo:()=>a});var i=n(71353),r=n(55946),s=n(74509);function o(e,t,n){return(0,i.f)(e,t,n)}function a(e){return e}function l(e,t,n){return(0,i.f)(e,t,n)}function h(e){return(0,i.g)(e)}function u(e,t,n){let{coordinateHelper:i,elevationInfo:r}=n;return e?c(i.vectorToDehydratedPoint(e,p),t,r):null}function c(e,t,n){var r,o;if(null==e)return null;if(null==t)return(0,i.f)(e.x,e.y,null!==(r=e.z)&&void 0!==r?r:0);if("2d"===t.type)return(0,i.f)(e.x,e.y,0);const a=null!==(o=(0,s.vQ)(t,e,n,s.jG))&&void 0!==o?o:0;return(0,i.f)(e.x,e.y,a)}function d(e,t){return(0,r.T)(e[0],e[1],e[2],t)}const p=(0,r.T)(0,0,0,null)},76014:(e,t,n)=>{n.d(t,{c:()=>u});var i=n(27366),r=n(51995),s=n(46784),o=n(49861),a=n(69912);let l=class extends s.wq{constructor(){super(...arguments),this.enabled=!0}};(0,i._)([(0,o.Cb)({type:Boolean})],l.prototype,"enabled",void 0),l=(0,i._)([(0,a.j)("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],l);let h=class extends s.wq{constructor(e){super(e),this.lineSnapper=new l,this.parallelLineSnapper=new l,this.rightAngleSnapper=new l,this.rightAngleTriangleSnapper=new l,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThreshold=.1,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new r.Z([255,127,0]),this.orangeTransparent=new r.Z([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};(0,i._)([(0,o.Cb)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],h.prototype,"lineSnapper",void 0),(0,i._)([(0,o.Cb)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],h.prototype,"parallelLineSnapper",void 0),(0,i._)([(0,o.Cb)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],h.prototype,"rightAngleSnapper",void 0),(0,i._)([(0,o.Cb)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],h.prototype,"rightAngleTriangleSnapper",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],h.prototype,"shortLineThreshold",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],h.prototype,"distance",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],h.prototype,"pointThreshold",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],h.prototype,"intersectionParallelLineThreshold",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],h.prototype,"parallelLineThreshold",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],h.prototype,"verticalLineThreshold",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],h.prototype,"touchSensitivityMultiplier",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],h.prototype,"pointOnLineThreshold",void 0),(0,i._)([(0,o.Cb)({type:r.Z,nonNullable:!0})],h.prototype,"orange",void 0),(0,i._)([(0,o.Cb)({type:r.Z,nonNullable:!0})],h.prototype,"orangeTransparent",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],h.prototype,"lineHintWidthReference",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],h.prototype,"lineHintWidthTarget",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],h.prototype,"lineHintFadedExtensions",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],h.prototype,"parallelLineHintWidth",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],h.prototype,"parallelLineHintLength",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],h.prototype,"parallelLineHintOffset",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],h.prototype,"rightAngleHintSize",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],h.prototype,"rightAngleHintOutlineSize",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],h.prototype,"satisfiesConstraintScreenThreshold",void 0),h=(0,i._)([(0,a.j)("esri.views.interactive.snapping.Settings.Defaults")],h);const u=new h},34019:(e,t,n)=>{n.d(t,{N:()=>i});class i{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.editGeometryOperations=e.editGeometryOperations,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.feature=e.feature,this.visualizer=e.visualizer,this.selfSnappingZ=e.selfSnappingZ}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}}},80371:(e,t,n)=>{var i;n.d(t,{B:()=>i}),function(e){e[e.FEATURE=1]="FEATURE",e[e.SELF=2]="SELF",e[e.ALL=3]="ALL"}(i||(i={}))},80151:(e,t,n)=>{n.d(t,{W:()=>d});var i=n(92026),r=n(66978),s=n(94172),o=n(70178),a=n(37818),l=n(74509),h=n(21641),u=n(34019),c=n(99912);function d(e){let{predicate:t=(()=>!0),snappingManager:n,snappingContext:a,updatingHandles:d,useZ:m=!0}=e;const v=new h.hM;if(null==n)return{snappingStep:[f,v],cancelSnapping:f};let y,E=null,b=null,x=null;const T=()=>{var e;E=(0,i.IM)(E),n.doneSnapping(),null!==(e=b)&&void 0!==e&&e.frameTask.remove(),b=null,y=(0,i.hw)(y),x=null},M=function(e,t,n){return(0,r.Ds)((async(i,r)=>{let{frameTask:s,point:a,scenePoint:l,context:h,event:u,delta:c,getLastState:d}=i;const p=await s.schedule((()=>e.snap({point:a,scenePoint:l,context:h,signal:r})),r);if(p.valid){let i=await s.schedule((()=>p.apply()),r);const l=d();null!=l.point&&a!==l.point&&(i=e.update({point:l.point,scenePoint:l.scenePoint,context:h})),null!=l.updatePoint&&(0,o.k)(i,l.updatePoint)||(_(u.mapEnd,i,c,t),n.execute(u))}}))}(n,m,v);let w=null,A=null,R=null;return{snappingStep:[e=>{if(!t(e))return e;const{action:i}=e;if("start"===i){const{info:t}=e,i=function(e){return"3d"===e.type?e.resourceController.scheduler.registerTask(c.T8.SNAPPING):c.sq}(n.view);if(b=function(e,t,n){return{context:new u.N({editGeometryOperations:e.editGeometryOperations,elevationInfo:e.elevationInfo,pointer:e.pointer,vertexHandle:null!=t.info?t.info.handle:null,excludeFeature:e.excludeFeature,feature:e.feature,visualizer:e.visualizer}),originalPos:null!=t.snapOrigin?e.coordinateHelper.vectorToDehydratedPoint(t.snapOrigin):t.mapStart,originalScenePos:null!=t.scenePoints?t.scenePoints.sceneStart:null,frameTask:n}}(a,e,i),b.context.selfSnappingZ=null,!m&&null!=t){var o;const e=function(e,t){if(!e.hasZ())return null;const n=t.vertices;let i=null;for(const r of n){const t=e.getZ(r.pos);if(null!=i&&null!=t&&Math.abs(t-i)>1e-6)return null;null==i&&(i=t)}return i}(a.coordinateHelper,t.handle.component);null!=e&&(b.context.selfSnappingZ={value:e,elevationInfo:null!==(o=a.elevationInfo)&&void 0!==o?o:l.jG})}}if(null!=b){const{context:t,originalScenePos:o,originalPos:a}=b,{mapEnd:l,mapStart:h,scenePoints:u}=e,c=p(a,g(l,h)),f=g(h,a),v={...e,action:"update"},T=b.context,S=function(e,t){return null==e||null==t?null:p(e,g(t.sceneEnd,t.sceneStart))}(o,u),C=n.update({point:c,scenePoint:S,context:t});if(R=C,_(l,C,f,m),w=c,A=S,"end"!==i){const{frameTask:e}=b;null==E&&(E=new AbortController),x=t=>{d.addPromise((0,r.R8)(M({frameTask:e,event:v,context:T,point:c,scenePoint:S,delta:f,getLastState:()=>({point:w,scenePoint:A,updatePoint:t.forceUpdate?null:R})},E.signal)))},x({forceUpdate:!1}),null==y&&(y=(0,s.YP)((()=>n.options.effectiveEnabled),(()=>{var e;return null===(e=x)||void 0===e?void 0:e({forceUpdate:!0})})))}}return"end"===i&&T(),e},v],cancelSnapping:e=>(T(),e)}}function p(e,t){let[n,i,r]=t;const s=(0,a.WG)(e);return s.x+=n,s.y+=i,s.hasZ&&(s.z+=r),s}function g(e,t){const n=e.hasZ&&t.hasZ?e.z-t.z:0;return[e.x-t.x,e.y-t.y,n]}function _(e,t,n,i){let[r,s,o]=n;e.x=t.x+r,e.y=t.y+s,i&&e.hasZ&&t.hasZ&&(e.z=t.z+o)}function f(e){return e}},38561:(e,t,n)=>{n.d(t,{a:()=>h});var i=n(42537),r=n(90609),s=n(53397),o=n(5916),a=n(61309),l=n(41216);class h{draw(e,t){const n=this._getUniqueHints(e),h=this.sortUniqueHints(n),u=[];for(const i of h)i instanceof r.w&&u.push(this.visualizeIntersectionPoint(i,t)),i instanceof s.w&&u.push(this.visualizeLine(i,t)),i instanceof o.L&&u.push(this.visualizeParallelSign(i,t)),i instanceof l.y&&u.push(this.visualizeRightAngleQuad(i,t)),i instanceof a.n&&u.push(this.visualizePoint(i,t));return(0,i.AL)(u)}sortUniqueHints(e){return e}_getUniqueHints(e){const t=[];for(const n of e){let e=!0;for(const i of t)if(n.equals(i)){e=!1;break}e&&t.push(n)}return t}}},90609:(e,t,n)=>{n.d(t,{w:()=>o});var i=n(11186),r=n(80371),s=n(55054);class o extends s.r{constructor(e,t){super(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.B.ALL),this.intersectionPoint=e}equals(e){return e instanceof o&&(0,i.h)(this.intersectionPoint,e.intersectionPoint)}}},53397:(e,t,n)=>{n.d(t,{w:()=>o});n(93169),n(32718);var i=n(11186),r=n(80371),s=n(55054);class o extends s.r{constructor(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.B.ALL,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];super(i,s),this.type=e,this.lineStart=t,this.lineEnd=n,this.fadeLeft=o,this.fadeRight=a}equals(e){return e instanceof o&&this.type===e.type&&(0,i.h)(this.lineStart,e.lineStart)&&(0,i.h)(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return(0,i.o)(this.lineStart,this.lineEnd)}}},5916:(e,t,n)=>{n.d(t,{L:()=>o});n(93169),n(32718);var i=n(11186),r=n(80371),s=n(55054);class o extends s.r{constructor(e,t,n){super(n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.B.ALL),this.lineStart=e,this.lineEnd=t}equals(e){return e instanceof o&&(0,i.h)(this.lineStart,e.lineStart)&&(0,i.h)(this.lineEnd,e.lineEnd)}}},61309:(e,t,n)=>{n.d(t,{n:()=>s});var i=n(11186),r=n(55054);class s extends r.r{constructor(e,t,n){super(t,n),this.point=e}equals(e){return e instanceof s&&(0,i.h)(this.point,e.point)}}},41216:(e,t,n)=>{n.d(t,{y:()=>o});n(93169),n(32718);var i=n(11186),r=n(80371),s=n(55054);class o extends s.r{constructor(e,t,n,i){super(i,arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.B.ALL),this.previousVertex=e,this.centerVertex=t,this.nextVertex=n}equals(e){return e instanceof o&&(0,i.h)(this.previousVertex,e.previousVertex)&&(0,i.h)(this.centerVertex,e.centerVertex)&&(0,i.h)(this.nextVertex,e.nextVertex)}}},55054:(e,t,n)=>{n.d(t,{r:()=>i});class i{constructor(e,t){this.isDraped=e,this.domain=t}}},64674:(e,t,n)=>{n.d(t,{Bb:()=>g,ML:()=>y,Ob:()=>E,_j:()=>v,fG:()=>_,lQ:()=>f,n0:()=>b,rh:()=>m,ze:()=>i});var i,r=n(94172),s=n(92377),o=n(76672),a=n(86710),l=n(11186),h=n(55946),u=n(86638),c=n(76741),d=n(87888),p=n(38054);function g(e,t){const n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function _(e,t){return Math.sqrt(g(e,t))}function f(e,t){t.sort(((t,n)=>(0,l.a)(t.targetPoint,e)-(0,l.a)(n.targetPoint,e)))}function m(e,t,n){let{point:i,distance:r,returnEdge:l,vertexMode:c,coordinateHelper:{spatialReference:d},filter:p}=e;return n=null!=n?n.clone():new u.Z({where:"1=1"}),p&&(n.geometry=p.geometry,n.distance=p.distance,n.spatialRelationship=p.spatialRelationship,n.where=(0,o._)(n.where,p.where),n.timeExtent=(0,a.Ov)(n.timeExtent,p.timeExtent),n.objectIds=function(e,t){return e||t?t?e?Array.from((0,s.jV)(new Set(e),new Set(t))):t:e:null}(n.objectIds,p.objectIds)),{point:(0,h.T)(i[0],i[1],i[2],d.toJSON()),mode:t,distance:r,returnEdge:l,vertexMode:c,query:n.toJSON()}}function v(e,t,n){return{left:(0,p.j7)(e.leftVertex.pos,t,n),right:(0,p.j7)(e.rightVertex.pos,t,n)}}function y(e){return e.createQuery()}function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};const n=(0,r.YP)((()=>({view:e.view,snappingOptions:e.snappingOptions})),(n=>{let{view:i,snappingOptions:r}=n;const s="snapping-toggle",o=c.f.TOOL;if(e.removeHandles(s),i&&null!=r){const n=[i.on("key-down",(e=>{e.key!==d.Kj.toggle||e.repeat||(r.enabledToggled=!0,t())}),o),i.on("key-up",(e=>{e.key===d.Kj.toggle&&(r.enabledToggled=!1,t())}),o),i.on("pointer-move",(e=>{const n=e.native.ctrlKey;r.enabledToggled!==n&&(r.enabledToggled=n,t())}),o)];e.addHandles(n,s)}}),r.tX);e.addHandles(n)}function b(e){var t;return null!=e&&"object"==typeof e&&"declaredClass"in e&&"esri.WebMap"===e.declaredClass&&"utilityNetworks"in e&&!(null===e||void 0===e||null===(t=e.utilityNetworks)||void 0===t||!t.length)}!function(e){e[e.TARGET=0]="TARGET",e[e.REFERENCE=1]="REFERENCE",e[e.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"}(i||(i={}))},75248:(e,t,n)=>{var i;n.d(t,{n:()=>i}),function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"}(i||(i={}))},99912:(e,t,n)=>{n.d(t,{sq:()=>S,T8:()=>_,G5:()=>R});var i=n(100),r=(n(93169),n(32718)),s=n(92026),o=n(90941),a=n(27546),l=n(66978),h=n(94172),u=n(76432),c=n(38499);class d{constructor(){this._tasks=new Array,this._running=(0,u.t)(!1)}get length(){return this._tasks.length}get running(){return this._running.value}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,n){return this._running.value=!0,new Promise(((i,r)=>this._tasks.push(new p(i,r,e,t,n))))}unshift(e,t,n){return this._running.value=!0,new Promise(((i,r)=>this._tasks.unshift(new p(i,r,e,t,n))))}_process(e){if(0===this._tasks.length)return!1;const t=this._tasks.shift();try{const i=(0,l.Hc)(t.signal);if(i&&!t.abortCallback)t.reject((0,l.zE)());else{var n;const r=i?null===(n=t.abortCallback)||void 0===n?void 0:n.call(t,(0,l.zE)()):t.callback(e);(0,l.y8)(r)?r.then(t.resolve,t.reject):t.resolve(r)}}catch(p){t.reject(p)}return this._running.value=this._tasks.length>0,!0}cancelAll(){const e=(0,l.zE)();for(const t of this._tasks)if(t.abortCallback){const n=t.abortCallback(e);t.resolve(n)}else t.reject(e);this._tasks.length=0,this._running.value=!1}}class p{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;this.resolve=e,this.reject=t,this.callback=n,this.signal=i,this.abortCallback=r}}var g,_,f=n(32609),m=n(75248);!function(e){e[e.YIELD=1]="YIELD"}(g||(g={})),function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"}(_||(_={}));const v=new Map([[_.RESOURCE_CONTROLLER_IMMEDIATE,0],[_.RESOURCE_CONTROLLER,4],[_.SLIDE,0],[_.STREAM_DATA_LOADER,0],[_.ELEVATION_QUERY,0],[_.TERRAIN_SURFACE,1],[_.SURFACE_GEOMETRY_UPDATES,1],[_.LOD_RENDERER,2],[_.GRAPHICS_CORE,2],[_.I3S_CONTROLLER,2],[_.POINT_CLOUD_LAYER,2],[_.FEATURE_TILE_FETCHER,2],[_.OVERLAY,4],[_.STAGE,4],[_.GRAPHICS_DECONFLICTOR,4],[_.FILTER_VISIBILITY,4],[_.SCALE_VISIBILITY,4],[_.FRUSTUM_VISIBILITY,4],[_.CLOUDS_GENERATOR,4],[_.POINT_OF_INTEREST_FREQUENT,6],[_.POINT_OF_INTEREST_INFREQUENT,30],[_.LABELER,8],[_.FEATURE_QUERY_ENGINE,8],[_.FEATURE_TILE_TREE,16],[_.FEATURE_TILE_TREE_ACTIVE,0],[_.ELEVATION_ALIGNMENT,12],[_.TEXT_TEXTURE_ATLAS,12],[_.TEXTURE_UNLOAD,12],[_.LINE_OF_SIGHT_TOOL,16],[_.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[_.SNAPPING,0],[_.SHADOW_ACCUMULATOR,30]]);function y(e){return v.has(e)?v.get(e):"number"==typeof e?e:1}const E=(0,c.HA)(6.5),b=(0,c.HA)(1),x=(0,c.HA)(30),T=(0,c.HA)(1e3/30),M=(0,c.HA)(100);var w,A;!function(e){e.Scheduler=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some((e=>e.needsUpdate))}constructor(){this._updating=(0,u.t)(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new o.Z("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new n,this._state=m.n.INTERACTING,this._tasks=new a.Z,this._runQueue=new a.Z,this._load=0,this._idleStateCallbacks=new a.Z,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=(0,h.YP)((()=>f.Z.SCHEDULER_LOG_SLOW_TASKS),(e=>this._debug=e),h.nn);for(const t of Object.keys(_))this.performanceInfo.tasks.set(_[t],new o.Z(_[t]));const e=this;this._test={FRAME_SAFETY_BUDGET:E,INTERACTING_BUDGET:T,IDLE_BUDGET:M,get availableBudget(){return e._budget.budget},usedBudget:0,getBudget:()=>e._budget,setBudget:t=>e._budget=t,updateTask:e=>this._updateTask(e),getState:e=>this._getState(e),getRuntime:e=>this._getRuntime(e),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach((e=>e.remove())),this._tasks.clear(),(0,s.hw)(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())})))}registerTask(e,n){const i=y(e),r=new t(this,e,n,i);return this._tasks.push(r),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new o.Z(e)),r}registerIdleStateCallbacks(e,t){const n={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(n),this.state===m.n.IDLE&&this._idleUpdatesStartFired&&n.idleBegin();const i=this;return{remove:()=>this._removeIdleStateCallbacks(n),set idleBegin(e){i._idleUpdatesStartFired&&(n.idleEnd(),i._state===m.n.IDLE&&e()),n.idleBegin=e},set idleEnd(e){n.idleEnd=e}}}get load(){return this._load}set state(e){this._state!==e&&(this._state=e,this.state!==m.n.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((e=>e.idleEnd()))))}get state(){return this._state}updateBudget(e){this._test.usedBudget=0,++this._frameNumber;let t=E,n=e.frameDuration,i=b;switch(this.state){case m.n.IDLE:t=(0,c.HA)(0),n=(0,c.HA)(Math.max(M,e.frameDuration)),i=x;break;case m.n.INTERACTING:n=(0,c.HA)(Math.max(T,e.frameDuration));case m.n.ANIMATING:}return n=(0,c.HA)(n-e.elapsedFrameTime-t),this.state!==m.n.IDLE&&n<b&&!this._forceTask?(this._forceTask=!0,!1):(n=(0,c.HA)(Math.max(n,i)),this._budget.reset(n,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case m.n.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((e=>e.idleBegin()))),this._runIdle();break;case m.n.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset((0,c.HA)(0),this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e)}removeTask(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e),this._updatingChanged()}_updateTask(e){this._tasks.forAll((t=>{t.name===e&&t.setPriority(e)}))}_getState(e){if(this._runQueue.some((t=>t.name===e)))return A.SCHEDULED;let t=A.IDLE;return this._tasks.forAll((n=>{n.name===e&&n.needsUpdate&&(n.schedulePriority<=1?t=A.READY:t!==A.READY&&(t=A.WAITING))})),t}_getRuntime(e){let t=0;return this._tasks.forAll((n=>{n.name===e&&(t+=n.runtime)})),t}_resetRuntimes(){this._tasks.forAll((e=>e.runtime=0))}_getRunning(){const e=new Map;if(this._tasks.forAll((t=>{t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1)})),0===e.size)return null;let t="";return e.forEach(((e,n)=>{t+=e>1?" ".concat(e,"x ").concat(n):" ".concat(n)})),t}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce(((e,t)=>t.needsUpdate?++e:e),0);this._load=.9*this._load+e*(1-.9)}_schedule(){for(this._runQueue.filterInPlace((e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1))),this._tasks.forAll((e=>{0===e.basePriority&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)}));0===this._runQueue.length;){let e=!1,t=0;if(this._tasks.forAll((n=>{n.needsUpdate&&0!==n.schedulePriority&&0!==n.basePriority&&n.blockFrame!==this._frameNumber&&(e=!0,t=Math.max(t,n.basePriority),1===n.schedulePriority?(n.schedulePriority=0,this._runQueue.push(n)):--n.schedulePriority)})),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const e=this._budget.now();this._startFrameTaskTimes();do{for(;this._runQueue.length>0;){const n=this._budget.now(),i=this._runQueue.pop();this._budget.resetProgress();try{i.task.runTask(this._budget)===g.YIELD&&(i.blockFrame=this._frameNumber)}catch(t){r.Z.getLogger("esri.views.support.Scheduler").error('Exception in task "'.concat(i.name,'"'),t),i.blockFrame=this._frameNumber}!this._budget.hasProgressed&&i.blockFrame!==this._frameNumber&&i.needsUpdate&&(i.name,_.I3S_CONTROLLER,i.blockFrame=this._frameNumber),i.schedulePriority=i.basePriority;const s=this._budget.now()-n;if(i.runtime+=s,this._frameTaskTimes.set(i.priority,this._frameTaskTimes.get(i.priority)+s),this._debug&&s>2*this._budget.budget&&console.log("Task",i.name,"used",s,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-e)}}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-e)}_startFrameTaskTimes(){for(const e of Object.keys(_))this._frameTaskTimes.set(_[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach(((e,t)=>this.performanceInfo.tasks.get(t).record(e))),this.performanceInfo.total.record(e)}get test(){return this._test}};class t{get task(){return this._task.value}get updating(){return this._queue.running}constructor(e,t,n,r){this._scheduler=e,this.name=t,this._basePriority=r,this.blockFrame=0,this.runtime=0,this._queue=new d,this._handles=new i.Z,this.schedulePriority=this._basePriority,this._task=(0,u.t)(null!=n?n:this._queue),this._handles.add((0,h.gx)((()=>this.task.running),(t=>e.taskRunningChanged(t))))}remove(){this.processQueue(R),this._scheduler.removeTask(this),this.schedule=S.schedule,this.reschedule=S.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){this.name=e;const t=y(e);0!==this._basePriority&&0===this.schedulePriority||(this.schedulePriority=t),this._basePriority=t}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.updating||this.task.running}schedule(e,t,n){return this._queue.push(e,t,n)}reschedule(e,t,n){return this._queue.unshift(e,t,n)}processQueue(e){this._queue.runTask(e)}}class n{constructor(){this._begin="undefined"!=typeof performance?performance.now():0,this._budget=0,this._state=m.n.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(!0===e()&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e,t){this._begin=this.now(),this._budget=e,this._state=t,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=n}(w||(w={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(A||(A={}));const R=(()=>{const e=new w.Budget;return e.enabled=!1,e})();const S=new class{remove(){}processQueue(){}schedule(e,t,n){try{if((0,l.Hc)(t)){const e=(0,l.zE)();return n?Promise.resolve(n(e)):Promise.reject(e)}return(0,l.gx)(e(R))}catch(i){return Promise.reject(i)}}reschedule(e,t,n){return this.schedule(e,t,n)}}},32609:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(27366),r=n(7138),s=n(49861),o=(n(25243),n(63780),n(93169),n(69912));let a=class extends r.Z{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};(0,i._)([(0,s.Cb)()],a.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),(0,i._)([(0,s.Cb)()],a.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),a=(0,i._)([(0,o.j)("esri.views.support.DebugFlags")],a);const l=new a},94163:(e,t,n)=>{n.d(t,{SP:()=>i,UG:()=>u,dU:()=>h,k0:()=>a,xO:()=>l});n(16889);var i,r=n(88396),s=n(6394);function o(e,t){return e[0]*t[1]-e[1]*t[0]}function a(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;return(0,r.c)(d,i,n),(0,r.c)(g,t,s),function(e,t,n){const i=(0,r.g)(n,t)/(0,r.v)(n);(0,r.a)(e,n,i)}(_,g,d),(0,r.i)(e,s,_)}function l(e,t,n,i){(0,r.c)(d,t,n);const s=i/(0,r.h)(d);return(0,r.w)(e,n,d,s)}function h(e,t){const n=e.start,s=e.end,a=t.start,l=t.end,h=(0,r.c)(d,s,n),u=(0,r.c)(p,l,a),f=o(h,u);if(Math.abs(f)<=c)return[];const m=(0,r.c)(g,n,a),v=o(u,m)/f,y=o(h,m)/f;if(v>=0){if(y>=0||t.type===i.LINE)return[(0,r.w)(_,n,h,v)]}else if(e.type===i.LINE&&(y>=0||t.type===i.LINE))return[(0,r.w)(_,n,h,v)];return[]}function u(e,t,n){const s=[],o=(0,r.c)(d,e.end,e.start),a=(0,r.c)(p,e.start,t),l=(0,r.v)(o),h=2*(0,r.g)(o,a),u=h*h-4*l*((0,r.v)(a)-n*n);if(0===u){const t=-h/(2*l);(e.type===i.LINE||t>=0)&&s.push((0,r.w)(_,e.start,o,t))}else if(u>0){const t=Math.sqrt(u),n=(-h+t)/(2*l);(e.type===i.LINE||n>=0)&&s.push((0,r.w)(_,e.start,o,n));const a=(-h-t)/(2*l);(e.type===i.LINE||a>=0)&&s.push((0,r.w)(g,e.start,o,a))}return s}!function(e){e[e.RAY=0]="RAY",e[e.LINE=1]="LINE"}(i||(i={}));const c=1e-6,d=(0,s.a)(),p=(0,s.a)(),g=(0,s.a)(),_=(0,s.a)()},32845:(e,t,n)=>{n.d(t,{V:()=>h});var i=n(27366),r=n(7138),s=n(32718),o=n(94172),a=n(49861),l=(n(25243),n(63780),n(93169),n(69912));let h=class extends r.Z{constructor(e){super(e),this.tool=null,this._loggedUnsupportedErrorOnce=!1,this.logger=s.Z.getLogger(this),null!=(null===e||void 0===e?void 0:e.visible)&&(this.visible=e.visible)}initialize(){this.addHandles((0,o.YP)((()=>({ready:null!=this.view&&this.view.ready,supported:this.supported})),(e=>{let{ready:t,supported:n}=e;!t||n||this._loggedUnsupportedErrorOnce||(this.logError(this.unsupportedErrorMessage),this._loggedUnsupportedErrorOnce=!0)}),o.tX))}destroy(){this.removeTool(),this.view=null}get active(){return null!=this.tool&&this.tool.active}get disabled(){return null==this.view||!this.view.ready||!this.supported}get supported(){return null==this.view||this.view.type===this.supportedViewType}get view(){return this._get("view")}set view(e){if(e===this.view)return;this.removeTool(),this._set("view",e);const t="tools";this.removeHandles(t),null!=e&&this.addHandles(e.tools.on("after-remove",(e=>{e.item===this.tool&&this._set("tool",null)})),t)}set visible(e){this._set("visible",e),null!=this.tool&&(this.tool.visible=e)}createTool(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interactive:!1};if(this.removeTool(),null==this.view||!this.view.ready||!this.supported)return;const t=this.constructTool();t.created?(this._set("tool",t),this.view.tools.add(t)):e.interactive?(this._set("tool",t),this.view.addAndActivateTool(t),(0,o.gx)((()=>t.created),(()=>{t.active&&null!=this.view&&(this.view.activeTool=null)}),{initial:!0,once:!0})):t.destroy()}removeTool(){var e;const t=this.tool;if(null==t)return;const n=null===(e=this.view)||void 0===e?void 0:e.tools;null!=n?n.remove(t):t.destroy(),this._set("tool",null)}logError(){this.logger.error(...arguments)}};(0,i._)([(0,a.Cb)({constructOnly:!0})],h.prototype,"tool",void 0),(0,i._)([(0,a.Cb)()],h.prototype,"active",null),(0,i._)([(0,a.Cb)()],h.prototype,"disabled",null),(0,i._)([(0,a.Cb)()],h.prototype,"supported",null),(0,i._)([(0,a.Cb)({value:null})],h.prototype,"view",null),(0,i._)([(0,a.Cb)({type:Boolean,value:!0})],h.prototype,"visible",null),h=(0,i._)([(0,l.j)("esri.widgets.support.InteractiveToolViewModel")],h)},82052:(e,t,n)=>{n.d(t,{s:()=>f});var i=n(27366),r=n(49861),s=(n(25243),n(63780),n(93169),n(69912)),o=n(33565),a=n(96913),l=n(68860),h=(n(80975),n(80532)),u=n(67005);const c="esri-unit-select",d={base:c,label:"".concat(c,"__label"),select:"".concat(c,"__select")};let p=class extends o.Z{constructor(e,t){super(e,t),this._onSelectChange=e=>{this.onChange(e.target.value)}}loadDependencies(){return(0,a.h)({label:()=>Promise.resolve().then(n.bind(n,85474)),option:()=>n.e(9790).then(n.bind(n,19790)),select:()=>n.e(6369).then(n.bind(n,26369))})}render(){const{messages:e,options:t,selectLabel:n,value:i,_onSelectChange:r}=this;return(0,u.u)("div",{class:d.base,key:"units"},(0,u.u)("calcite-label",{class:d.label},n,(0,u.u)("calcite-select",{class:d.select,label:n,onCalciteSelectChange:r},t.map((t=>{var n;return(0,u.u)("calcite-option",{key:t,selected:t===i,value:t},(0,l.ZO)(t)?e.systems[t]:null===(n=e.units[t])||void 0===n?void 0:n.pluralCapitalized)})))))}};(0,i._)([(0,r.Cb)()],p.prototype,"options",void 0),(0,i._)([(0,r.Cb)()],p.prototype,"onChange",void 0),(0,i._)([(0,r.Cb)()],p.prototype,"selectLabel",void 0),(0,i._)([(0,r.Cb)()],p.prototype,"value",void 0),(0,i._)([(0,r.Cb)(),(0,h.H)("esri/core/t9n/Units")],p.prototype,"messages",void 0),p=(0,i._)([(0,s.j)("esri.widgets.support.UnitSelect")],p);const g="esri-measurement-widget-content",_={base:g,actions:"".concat(g,"__actions"),error:"".concat(g,"__error"),hint:"".concat(g,"__hint"),hintText:"".concat(g,"__hint-text"),panelError:"".concat(g,"__panel--error"),settings:"".concat(g,"__settings"),measurement:"".concat(g,"__measurement"),measurementItem:"".concat(g,"__measurement-item"),measurementItemDisabled:"".concat(g,"__measurement-item--disabled"),measurementItemTitle:"".concat(g,"__measurement-item__title"),measurementItemValue:"".concat(g,"__measurement-item__value")};let f=class extends o.Z{constructor(e,t){super(e,t)}loadDependencies(){return(0,a.h)({button:()=>Promise.resolve().then(n.bind(n,32275))})}render(){return(0,u.u)("div",{class:_.base},this._renderContent())}_renderContent(){const{supported:e,active:t,state:n}=this;switch(n){case"disabled":case"ready":return e?t?this._renderHint():this._renderActions():this._renderUnsupportedMessage();case"measuring":case"measured":return[this._renderSettings(),this._renderMeasurement(),this._renderActions()]}}_renderUnsupportedMessage(){return(0,u.u)("section",{class:_.error,key:"unsupported"},(0,u.u)("p",null,this.messages.unsupported))}_renderHint(){const{messages:e}=this;return(0,u.u)("section",{class:_.hint,key:"hint"},(0,u.u)("p",{class:_.hintText},e.hint))}_renderSettings(){return(0,u.u)("div",{class:_.settings,key:"settings"},(0,u.u)(p,{options:this.unitOptions,selectLabel:this.messages.unit,value:this.unit,onChange:this.onUnitChange}))}_renderMeasurement(){return(0,u.u)("section",{class:_.measurement,key:"measurement"},this.measurementItems.map((e=>this._renderMeasurementItem(e))))}_renderMeasurementItem(e){let{key:t,title:n,value:i}=e;return(0,u.u)("div",{class:this.classes(_.measurementItem,null==i&&_.measurementItemDisabled),key:t},(0,u.u)("span",{class:_.measurementItemTitle},n),(0,u.u)("span",{"aria-live":"polite",class:_.measurementItemValue},null!==i&&void 0!==i?i:this.messages.notApplicable))}_renderActions(){const{messages:e}=this;return(0,u.u)("div",{class:_.actions},(0,u.u)("calcite-button",{class:this.newMeasurementButtonClass,disabled:"disabled"===this.state,onclick:this.onNewMeasurementClick},e.newMeasurement))}};(0,i._)([(0,r.Cb)()],f.prototype,"active",void 0),(0,i._)([(0,r.Cb)()],f.prototype,"measurementItems",void 0),(0,i._)([(0,r.Cb)()],f.prototype,"messages",void 0),(0,i._)([(0,r.Cb)()],f.prototype,"newMeasurementButtonClass",void 0),(0,i._)([(0,r.Cb)()],f.prototype,"onNewMeasurementClick",void 0),(0,i._)([(0,r.Cb)()],f.prototype,"onUnitChange",void 0),(0,i._)([(0,r.Cb)()],f.prototype,"state",void 0),(0,i._)([(0,r.Cb)()],f.prototype,"supported",void 0),(0,i._)([(0,r.Cb)()],f.prototype,"unit",void 0),(0,i._)([(0,r.Cb)()],f.prototype,"unitOptions",void 0),f=(0,i._)([(0,s.j)("esri.widgets.support.MeasurementWidgetContent")],f)}}]);
//# sourceMappingURL=8336.03fded20.chunk.js.map